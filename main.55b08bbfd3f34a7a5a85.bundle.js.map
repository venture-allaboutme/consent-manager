{"version":3,"sources":["webpack:///./src/consent-manager/index.tsx","webpack:///./src/consent-manager/categories.ts","webpack:///./stories/0.1-consent-manager-close-interaction.stories.tsx","webpack:///./stories/1-standalone.stories.tsx","webpack:///./stories/1.1-standalone-custom.stories.tsx","webpack:///./stories/2-category-based.stories.tsx","webpack:///./stories/3-tool-based.stories.tsx","webpack:///./stories/4-custom-consent.stories.tsx","webpack:///./stories/5-custom-categories.stories.tsx","webpack:///./stories/6-ccpa-gdpr-example.stories.tsx","webpack:///./stories/7-default-destination-behavior.stories.tsx","webpack:///./stories/8-mixpanel-custom-events.stories.tsx","webpack:///./stories/9-heading.stories.tsx","webpack:///./stories/components/CookieView.tsx","webpack:///./src/index.ts","webpack:///./stories/components/destination-tile.tsx","webpack:///./src/consent-manager-builder/preferences.ts","webpack:///./src/consent-manager-builder/fetch-destinations.ts","webpack:///./src/consent-manager-builder/analytics.ts","webpack:///./src/consent-manager-builder/index.tsx","webpack:///./stories/standalone.html","webpack:///./stories/standalone-custom.html","webpack:///./src/consent-manager/font-styles.tsx","webpack:///./src/consent-manager/banner.tsx","webpack:///./src/consent-manager/dialog.tsx","webpack:///./src/consent-manager/buttons.tsx","webpack:///./src/consent-manager/preference-dialog.tsx","webpack:///./src/consent-manager/cancel-dialog.tsx","webpack:///./src/consent-manager/container.tsx","webpack:///./stories/ImplyConsentOnInteraction.tsx","webpack:///./stories/components/common-react.tsx","webpack:///./.storybook/config.js","webpack:///./stories sync \\.stories\\.tsx$","webpack:///./stories/0-consent-manager.stories.tsx"],"names":["extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","zeroValuePreferences","marketingAndAnalytics","advertising","functional","ConsentManager","_super","_this","apply","arguments","getInitialPreferences","_a","props","initialPreferences","customCategories","initialCustomPreferences","keys","forEach","category","handleMapCustomPreferences","destinations","preferences","destinationPreferences","customPreferences","_i","length","value","preferenceName","destination","entries","categoryName","integrations","consentAlreadySetToFalse","id","includes","_b","_c","customPrefs","_loop_1","find","c","_d","destinations_1","render","writeKey","otherWriteKeys","shouldRequireConsent","implyConsentOnInteraction","cookieDomain","bannerHeading","bannerContent","bannerAcceptContent","bannerRejectContent","bannerSubContent","bannerTextColor","bannerBackgroundColor","preferencesDialogTitle","preferencesDialogContent","cancelDialogTitle","cancelDialogContent","defaultDestinationBehavior","cdnHost","onError","mixpanelToken","mixpanelTracking","init","createElement","mapCustomPreferences","newDestinations","isConsentRequired","setPreferences","resetPreferences","saveConsent","havePreferencesChanged","workspaceAddedNewDestinations","closeBehavior","defaultProps","displayName","undefined","ADVERTISING_CATEGORIES","FUNCTIONAL_CATEGORIES","withSourceLoader","withSource","__STORY__","__ADDS_MAP__","href","target","rel","ConsentManagerExample","marginX","marginTop","display","src","width","height","frameBorder","onClick","remove","window","location","reload","module","addParameters","storySource","source","locationsMap","addDecorator","add","StandaloneConsentManagerExample","Fragment","style","overflow","flex","srcDoc","language","customStyle","__assign","assign","t","s","i","n","call","Section","is","marginBottom","CategoryBased","maxWidth","margin","e","console","error","categories","byCategory","onSubmit","handleSubmit","preventDefault","map","cat","destinationsForCategory","key","flexWrap","JSON","stringify","type","marginRight","ToolBased","Custom","useState","prefs","updatePrefs","cleanup","useEffect","purpose","inCA","inEU","caDefaultPreferences","_categories","analytics","track","__SOURCE_PREFIX__","__MAIN_FILE_LOCATION__","__MODULE_DEPENDENCIES__","__LOCAL_DEPENDENCIES__","__IDS_TO_FRAMEWORKS__","ConsentManagerMixpanel","enabled","role","getJSON","cookieVal","updateCookieVal","clear","setInterval","clearInterval","allCookies","ConsentManagerBuilder","Destination","elevation","padding","paddingTop","label","website","name","checked","Boolean","onChange","size","description","propTypes","object","isRequired","func","COOKIE_KEY","COOKIE_EXPIRES","loadPreferences","custom","emitter","onPreferencesSaved","listener","on","off","savePreferences","wd","identify","destinationTrackingPreferences","customTrackingPreferences","domain","version","set","expires","emit","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","adopt","then","__generator","body","f","y","g","_","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","fetchDestinationForWriteKey","res","ok","Error","status","statusText","json","creationName","fetchDestinations","writeKeys","destinationsRequests","writeKeys_1","all","filter","conditionallyLoadAnalytics","shouldReload","categoryPreferences","All","isAnythingEnabled","isEnabled","initialized","middleware","getConsentMiddleware","payload","obj","context","consent","addSourceMiddleware","load","__spreadArrays","il","r","k","a","j","jl","getNewDestinations","state","isLoading","initialise","_e","_f","hasInitialPreferenceToTrue","emptyCustomPreferecences","mapped","_g","values","some","every","setState","handleSetPreferences","newPreferences","prevState","existingPreferences","mergePreferences","handleResetPreferences","handleSaveConsent","preferenceCookie","hasPreferenceCookie","args","destinations_2","children","componentDidMount","e_1","templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","templateObject_6","templateObject_7","templateObject_8","templateObject_9","__makeTemplateObject","cooked","raw","defineProperty","Root","Content","Action","SecondaryActions","BannerHeading","BannerContent","AcceptButton","LinkButton","CloseButton","Banner","innerRef","showClose","onClose","onAccept","onReject","onChangePreferences","heading","content","acceptContent","rejectContent","subContent","backgroundColor","textColor","title","Overlay","openAnimation","Form","Header","Title","HeaderCancelButton","Buttons","Dialog","handleRootRef","node","root","handleFormRef","form","handleOverlayClick","onCancel","contains","handleEsc","keyCode","titleId","container","document","setAttribute","appendChild","buttons","dialog","createPortal","input","querySelector","focus","addEventListener","componentWillUnmount","removeEventListener","removeChild","baseStyles","DefaultButton","GreenButton","RedButton","hideOnMobile","TableScroll","Table","ColumnHeading","RowHeading","Row","InputCell","PreferenceDialog","handleChange","onSave","marketingDestinations","advertisingDestinations","functionalDestinations","scope","className","required","join","CancelDialog","onConfirm","onBack","openDialog","isDialogOpen","toggleDialog","showBanner","toggleBanner","isCancelling","toggleCancel","banner","useRef","preferenceDialog","cancelDialog","normalizeDestinations","handleBodyClick","current","showDialog","removeListener","falsePreferences","reduce","acc","customClosePreferences","truePreferences","ImplyConsentOnInteraction","configure","require","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","webpackContextKeys","exports"],"mappings":"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","file":"main.55b08bbfd3f34a7a5a85.bundle.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport mixpanel from 'mixpanel-browser';\nimport ConsentManagerBuilder from '../consent-manager-builder';\nimport Container from './container';\nimport { ADVERTISING_CATEGORIES, FUNCTIONAL_CATEGORIES } from './categories';\nvar zeroValuePreferences = {\n    marketingAndAnalytics: null,\n    advertising: null,\n    functional: null\n};\nvar ConsentManager = /** @class */ (function (_super) {\n    __extends(ConsentManager, _super);\n    function ConsentManager() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.getInitialPreferences = function () {\n            var _a = _this.props, initialPreferences = _a.initialPreferences, customCategories = _a.customCategories;\n            if (initialPreferences) {\n                return initialPreferences;\n            }\n            if (!customCategories) {\n                return zeroValuePreferences;\n            }\n            var initialCustomPreferences = {};\n            Object.keys(customCategories).forEach(function (category) {\n                initialCustomPreferences[category] = null;\n            });\n            return initialCustomPreferences;\n        };\n        _this.handleMapCustomPreferences = function (destinations, preferences) {\n            var customCategories = _this.props.customCategories;\n            var destinationPreferences = {};\n            var customPreferences = {};\n            if (customCategories) {\n                for (var _i = 0, _a = Object.keys(customCategories); _i < _a.length; _i++) {\n                    var preferenceName = _a[_i];\n                    var value = preferences[preferenceName];\n                    if (typeof value === 'boolean') {\n                        customPreferences[preferenceName] = value;\n                    }\n                    else {\n                        customPreferences[preferenceName] = true;\n                    }\n                }\n                destinations.forEach(function (destination) {\n                    // Mark custom categories\n                    Object.entries(customCategories).forEach(function (_a) {\n                        var categoryName = _a[0], integrations = _a[1].integrations;\n                        var consentAlreadySetToFalse = destinationPreferences[destination.id] === false;\n                        var shouldSetConsent = integrations.includes(destination.id);\n                        if (shouldSetConsent && !consentAlreadySetToFalse) {\n                            destinationPreferences[destination.id] = customPreferences[categoryName];\n                        }\n                    });\n                });\n                return { destinationPreferences: destinationPreferences, customPreferences: customPreferences };\n            }\n            // Default unset preferences to true (for implicit consent)\n            for (var _b = 0, _c = Object.keys(preferences); _b < _c.length; _b++) {\n                var preferenceName = _c[_b];\n                var value = preferences[preferenceName];\n                if (typeof value === 'boolean') {\n                    customPreferences[preferenceName] = value;\n                }\n                else {\n                    customPreferences[preferenceName] = true;\n                }\n            }\n            var customPrefs = customPreferences;\n            var _loop_1 = function (destination) {\n                // Mark advertising destinations\n                if (ADVERTISING_CATEGORIES.find(function (c) { return c === destination.category; }) &&\n                    destinationPreferences[destination.id] !== false) {\n                    destinationPreferences[destination.id] = customPrefs.advertising;\n                }\n                // Mark function destinations\n                if (FUNCTIONAL_CATEGORIES.find(function (c) { return c === destination.category; }) &&\n                    destinationPreferences[destination.id] !== false) {\n                    destinationPreferences[destination.id] = customPrefs.functional;\n                }\n                // Fallback to marketing\n                if (!(destination.id in destinationPreferences)) {\n                    destinationPreferences[destination.id] = customPrefs.marketingAndAnalytics;\n                }\n            };\n            for (var _d = 0, destinations_1 = destinations; _d < destinations_1.length; _d++) {\n                var destination = destinations_1[_d];\n                _loop_1(destination);\n            }\n            return { destinationPreferences: destinationPreferences, customPreferences: customPreferences };\n        };\n        return _this;\n    }\n    ConsentManager.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, writeKey = _a.writeKey, otherWriteKeys = _a.otherWriteKeys, shouldRequireConsent = _a.shouldRequireConsent, implyConsentOnInteraction = _a.implyConsentOnInteraction, cookieDomain = _a.cookieDomain, bannerHeading = _a.bannerHeading, bannerContent = _a.bannerContent, bannerAcceptContent = _a.bannerAcceptContent, bannerRejectContent = _a.bannerRejectContent, bannerSubContent = _a.bannerSubContent, bannerTextColor = _a.bannerTextColor, bannerBackgroundColor = _a.bannerBackgroundColor, preferencesDialogTitle = _a.preferencesDialogTitle, preferencesDialogContent = _a.preferencesDialogContent, cancelDialogTitle = _a.cancelDialogTitle, cancelDialogContent = _a.cancelDialogContent, customCategories = _a.customCategories, defaultDestinationBehavior = _a.defaultDestinationBehavior, cdnHost = _a.cdnHost, onError = _a.onError, mixpanelToken = _a.mixpanelToken, mixpanelTracking = _a.mixpanelTracking;\n        mixpanel.init(mixpanelToken);\n        return (React.createElement(ConsentManagerBuilder, { onError: onError, writeKey: writeKey, otherWriteKeys: otherWriteKeys, shouldRequireConsent: shouldRequireConsent, cookieDomain: cookieDomain, initialPreferences: this.getInitialPreferences(), mapCustomPreferences: this.handleMapCustomPreferences, customCategories: customCategories, defaultDestinationBehavior: defaultDestinationBehavior, cdnHost: cdnHost, mixpanelTracking: mixpanelTracking }, function (_a) {\n            var destinations = _a.destinations, customCategories = _a.customCategories, newDestinations = _a.newDestinations, preferences = _a.preferences, isConsentRequired = _a.isConsentRequired, setPreferences = _a.setPreferences, resetPreferences = _a.resetPreferences, saveConsent = _a.saveConsent, havePreferencesChanged = _a.havePreferencesChanged, workspaceAddedNewDestinations = _a.workspaceAddedNewDestinations;\n            return (React.createElement(Container, { customCategories: customCategories, destinations: destinations, newDestinations: newDestinations, preferences: preferences, isConsentRequired: isConsentRequired, setPreferences: setPreferences, resetPreferences: resetPreferences, saveConsent: saveConsent, closeBehavior: _this.props.closeBehavior, implyConsentOnInteraction: (implyConsentOnInteraction !== null && implyConsentOnInteraction !== void 0 ? implyConsentOnInteraction : ConsentManager.defaultProps.implyConsentOnInteraction), bannerHeading: bannerHeading, bannerContent: bannerContent, bannerAcceptContent: bannerAcceptContent, bannerRejectContent: bannerRejectContent, bannerSubContent: bannerSubContent, bannerTextColor: bannerTextColor || ConsentManager.defaultProps.bannerTextColor, bannerBackgroundColor: bannerBackgroundColor || ConsentManager.defaultProps.bannerBackgroundColor, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, havePreferencesChanged: havePreferencesChanged, defaultDestinationBehavior: defaultDestinationBehavior, workspaceAddedNewDestinations: workspaceAddedNewDestinations, mixpanelTracking: mixpanelTracking }));\n        }));\n    };\n    ConsentManager.displayName = 'ConsentManager';\n    ConsentManager.defaultProps = {\n        otherWriteKeys: [],\n        shouldRequireConsent: function () { return true; },\n        implyConsentOnInteraction: false,\n        onError: undefined,\n        cookieDomain: undefined,\n        customCategories: undefined,\n        bannerTextColor: '#ffffff',\n        bannerAcceptContent: 'Accept All',\n        bannerSubContent: 'Manage Preferences',\n        bannerBackgroundColor: '#1f4160',\n        preferencesDialogTitle: 'Website Data Collection Preferences',\n        cancelDialogTitle: 'Are you sure you want to cancel?',\n        defaultDestinationBehavior: 'disable'\n    };\n    return ConsentManager;\n}(PureComponent));\nexport default ConsentManager;\n","export var MARKETING_AND_ANALYTICS_CATEGORIES = [\n    'A/B Testing',\n    'Analytics',\n    'Attribution',\n    'Email',\n    'Enrichment',\n    'Heatmaps & Recordings',\n    'Raw Data',\n    'Realtime Dashboards',\n    'Referrals',\n    'Surveys',\n    'Video'\n];\nexport var ADVERTISING_CATEGORIES = ['Advertising', 'Tag Managers'];\nexport var FUNCTIONAL_CATEGORIES = [\n    'CRM',\n    'Customer Success',\n    'Deep Linking',\n    'Helpdesk',\n    'Livechat',\n    'Performance Monitoring',\n    'Personalization',\n    'SMS & Push Notifications',\n    'Security & Fraud'\n];\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { ImplyConsentOnInteraction } from './ImplyConsentOnInteraction'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = () => {\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Your website content </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <Button onClick={openConsentManager}>Data Collection and Cookie Preferences</Button>\\n        </p>\\n\\n        <p>\\n          <Heading>to see the banner again:</Heading>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear tracking preferences cookie\\n          </Button>\\n        </p>\\n      </Pane>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('React Component / Basics', module)\\n  .add(`Basic React Component`, () => <ConsentManagerExample />)\\n  .add(`Basic React Component with implied consent`, () => <ImplyConsentOnInteraction />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/0.1-consent-manager-close-interaction.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { ImplyConsentOnInteraction } from './ImplyConsentOnInteraction';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function () {\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(Button, { onClick: openConsentManager }, \"Data Collection and Cookie Preferences\")),\n            React.createElement(\"p\", null,\n                React.createElement(Heading, null, \"to see the banner again:\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear tracking preferences cookie\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('React Component / Basics', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Basic React Component\", function () { return React.createElement(ConsentManagerExample, null); })\n    .add(\"Basic React Component with implied consent\", function () { return React.createElement(ImplyConsentOnInteraction, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { storiesOf } from '@storybook/react'\\nimport { Pane } from 'evergreen-ui'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\n\\n// @ts-ignore\\nimport contents from 'raw-loader!./standalone.html'\\nimport CookieView from './components/CookieView'\\n\\nconst StandaloneConsentManagerExample = () => {\\n  return (\\n    <>\\n      <Pane display=\\\"flex\\\" height=\\\"calc(100vh - 10px)\\\">\\n        <iframe\\n          frameBorder=\\\"0\\\"\\n          style={{ overflow: 'hidden', height: '100%', width: '550px', flex: 1 }}\\n          height=\\\"100%\\\"\\n          width=\\\"550\\\"\\n          srcDoc={contents}\\n        ></iframe>\\n        <SyntaxHighlighter language=\\\"html\\\" style={docco} customStyle={{ flex: 1 }}>\\n          {contents}\\n        </SyntaxHighlighter>\\n      </Pane>\\n\\n      <CookieView />\\n    </>\\n  )\\n}\\n\\nstoriesOf('Standalone / Tag', module).add(`Basic`, () => <StandaloneConsentManagerExample />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/1-standalone.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Pane } from 'evergreen-ui';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n// @ts-ignore\nimport contents from 'raw-loader!./standalone.html';\nimport CookieView from './components/CookieView';\nvar StandaloneConsentManagerExample = function () {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Pane, { display: \"flex\", height: \"calc(100vh - 10px)\" },\n            React.createElement(\"iframe\", { frameBorder: \"0\", style: { overflow: 'hidden', height: '100%', width: '550px', flex: 1 }, height: \"100%\", width: \"550\", srcDoc: contents }),\n            React.createElement(SyntaxHighlighter, { language: \"html\", style: docco, customStyle: { flex: 1 } }, contents)),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Standalone / Tag', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Basic\", function () { return React.createElement(StandaloneConsentManagerExample, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { storiesOf } from '@storybook/react'\\nimport { Pane } from 'evergreen-ui'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\n\\n// @ts-ignore\\nimport contents from 'raw-loader!./standalone-custom.html'\\nimport CookieView from './components/CookieView'\\n\\nconst StandaloneConsentManagerExample = () => {\\n  return (\\n    <>\\n      <Pane display=\\\"flex\\\" height=\\\"calc(100vh - 10px)\\\">\\n        <iframe\\n          frameBorder=\\\"0\\\"\\n          style={{ overflow: 'hidden', height: '100%', width: '550px', flex: 1 }}\\n          height=\\\"100%\\\"\\n          width=\\\"550\\\"\\n          srcDoc={contents}\\n        ></iframe>\\n        <SyntaxHighlighter language=\\\"html\\\" style={docco} customStyle={{ flex: 1 }}>\\n          {contents}\\n        </SyntaxHighlighter>\\n      </Pane>\\n      <CookieView />\\n    </>\\n  )\\n}\\n\\nstoriesOf('Standalone / Javascript', module).add(`with Customization`, () => (\\n  <StandaloneConsentManagerExample />\\n))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/1.1-standalone-custom.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { Pane } from 'evergreen-ui';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n// @ts-ignore\nimport contents from 'raw-loader!./standalone-custom.html';\nimport CookieView from './components/CookieView';\nvar StandaloneConsentManagerExample = function () {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Pane, { display: \"flex\", height: \"calc(100vh - 10px)\" },\n            React.createElement(\"iframe\", { frameBorder: \"0\", style: { overflow: 'hidden', height: '100%', width: '550px', flex: 1 }, height: \"100%\", width: \"550\", srcDoc: contents }),\n            React.createElement(SyntaxHighlighter, { language: \"html\", style: docco, customStyle: { flex: 1 } }, contents)),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Standalone / Javascript', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"with Customization\", function () { return (React.createElement(StandaloneConsentManagerExample, null)); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { groupBy } from 'lodash'\\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui'\\nimport { ConsentManagerBuilder } from '../src'\\nimport DestinationTile from './components/destination-tile'\\nimport { storiesOf } from '@storybook/react'\\nimport CookieView from './components/CookieView'\\n\\nfunction Section(props) {\\n  return <Pane is=\\\"section\\\" marginBottom={24} {...props} />\\n}\\n\\nfunction byCategory(destinations) {\\n  return groupBy(destinations, 'category')\\n}\\n\\nconst CategoryBased = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManagerBuilder\\n        onError={e => console.error('Error Handling', e)}\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n      >\\n        {({ destinations, preferences, setPreferences, saveConsent }) => {\\n          function handleSubmit(e) {\\n            e.preventDefault()\\n            saveConsent()\\n          }\\n\\n          const categories = byCategory(destinations)\\n\\n          return (\\n            <form onSubmit={handleSubmit}>\\n              <Section>\\n                <Heading>ACME Would like to track you with the following tools:</Heading>\\n\\n                {Object.keys(categories).map(cat => {\\n                  const destinationsForCategory = categories[cat]\\n                  return (\\n                    <Pane key={cat} marginTop={20}>\\n                      <SubHeading>{cat}</SubHeading>\\n                      <Ul display=\\\"flex\\\" flexWrap=\\\"wrap\\\">\\n                        {destinationsForCategory.map(d => (\\n                          <DestinationTile\\n                            key={d.id}\\n                            destination={d}\\n                            setPreferences={setPreferences}\\n                            preferences={preferences}\\n                          />\\n                        ))}\\n                      </Ul>\\n                    </Pane>\\n                  )\\n                })}\\n              </Section>\\n\\n              <Section>\\n                <Heading>Preferences</Heading>\\n                <Code>{JSON.stringify(preferences)}</Code>\\n              </Section>\\n\\n              <Button type=\\\"submit\\\" marginRight={8}>\\n                Save\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(true)} marginRight={8}>\\n                Allow all\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(false)}>\\n                Deny all\\n              </Button>\\n            </form>\\n          )\\n        }}\\n      </ConsentManagerBuilder>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('ConsentManagerBuilder', module).add(`Category Based`, () => <CategoryBased />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/2-category-based.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { groupBy } from 'lodash';\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui';\nimport { ConsentManagerBuilder } from '../src';\nimport DestinationTile from './components/destination-tile';\nimport { storiesOf } from '@storybook/react';\nimport CookieView from './components/CookieView';\nfunction Section(props) {\n    return React.createElement(Pane, __assign({ is: \"section\", marginBottom: 24 }, props));\n}\nfunction byCategory(destinations) {\n    return groupBy(destinations, 'category');\n}\nvar CategoryBased = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManagerBuilder, { onError: function (e) { return console.error('Error Handling', e); }, writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'] }, function (_a) {\n            var destinations = _a.destinations, preferences = _a.preferences, setPreferences = _a.setPreferences, saveConsent = _a.saveConsent;\n            function handleSubmit(e) {\n                e.preventDefault();\n                saveConsent();\n            }\n            var categories = byCategory(destinations);\n            return (React.createElement(\"form\", { onSubmit: handleSubmit },\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"ACME Would like to track you with the following tools:\"),\n                    Object.keys(categories).map(function (cat) {\n                        var destinationsForCategory = categories[cat];\n                        return (React.createElement(Pane, { key: cat, marginTop: 20 },\n                            React.createElement(SubHeading, null, cat),\n                            React.createElement(Ul, { display: \"flex\", flexWrap: \"wrap\" }, destinationsForCategory.map(function (d) { return (React.createElement(DestinationTile, { key: d.id, destination: d, setPreferences: setPreferences, preferences: preferences })); }))));\n                    })),\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"Preferences\"),\n                    React.createElement(Code, null, JSON.stringify(preferences))),\n                React.createElement(Button, { type: \"submit\", marginRight: 8 }, \"Save\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(true); }, marginRight: 8 }, \"Allow all\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(false); } }, \"Deny all\")));\n        }),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('ConsentManagerBuilder', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Category Based\", function () { return React.createElement(CategoryBased, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui'\\nimport { ConsentManagerBuilder } from '../src'\\nimport DestinationTile from './components/destination-tile'\\nimport { storiesOf } from '@storybook/react'\\nimport CookieView from './components/CookieView'\\n\\nfunction Section(props) {\\n  return <Pane is=\\\"section\\\" marginBottom={24} {...props} />\\n}\\n\\nconst ToolBased = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManagerBuilder\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n      >\\n        {({ destinations, preferences, setPreferences, saveConsent }) => {\\n          function handleSubmit(e) {\\n            e.preventDefault()\\n            saveConsent()\\n          }\\n\\n          return (\\n            <form onSubmit={handleSubmit}>\\n              <Section>\\n                <Heading>ACME Would like to track you with the following tools:</Heading>\\n                <Ul display=\\\"flex\\\" flexWrap=\\\"wrap\\\">\\n                  {destinations.map(d => (\\n                    <DestinationTile\\n                      key={d.id}\\n                      destination={d}\\n                      setPreferences={setPreferences}\\n                      preferences={preferences}\\n                    />\\n                  ))}\\n                </Ul>\\n              </Section>\\n\\n              <Section>\\n                <SubHeading>Preferences</SubHeading>\\n                <Code>{JSON.stringify(preferences)}</Code>\\n              </Section>\\n\\n              <Button type=\\\"submit\\\" marginRight={8}>\\n                Save\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(true)} marginRight={8}>\\n                Allow all\\n              </Button>\\n\\n              <Button type=\\\"button\\\" onClick={() => saveConsent(false)}>\\n                Deny all\\n              </Button>\\n            </form>\\n          )\\n        }}\\n      </ConsentManagerBuilder>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('ConsentManagerBuilder', module).add(`Tool Based`, () => <ToolBased />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/3-tool-based.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Heading, SubHeading, Ul, Code, Button } from 'evergreen-ui';\nimport { ConsentManagerBuilder } from '../src';\nimport DestinationTile from './components/destination-tile';\nimport { storiesOf } from '@storybook/react';\nimport CookieView from './components/CookieView';\nfunction Section(props) {\n    return React.createElement(Pane, __assign({ is: \"section\", marginBottom: 24 }, props));\n}\nvar ToolBased = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManagerBuilder, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'] }, function (_a) {\n            var destinations = _a.destinations, preferences = _a.preferences, setPreferences = _a.setPreferences, saveConsent = _a.saveConsent;\n            function handleSubmit(e) {\n                e.preventDefault();\n                saveConsent();\n            }\n            return (React.createElement(\"form\", { onSubmit: handleSubmit },\n                React.createElement(Section, null,\n                    React.createElement(Heading, null, \"ACME Would like to track you with the following tools:\"),\n                    React.createElement(Ul, { display: \"flex\", flexWrap: \"wrap\" }, destinations.map(function (d) { return (React.createElement(DestinationTile, { key: d.id, destination: d, setPreferences: setPreferences, preferences: preferences })); }))),\n                React.createElement(Section, null,\n                    React.createElement(SubHeading, null, \"Preferences\"),\n                    React.createElement(Code, null, JSON.stringify(preferences))),\n                React.createElement(Button, { type: \"submit\", marginRight: 8 }, \"Save\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(true); }, marginRight: 8 }, \"Allow all\"),\n                React.createElement(Button, { type: \"button\", onClick: function () { return saveConsent(false); } }, \"Deny all\")));\n        }),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('ConsentManagerBuilder', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Tool Based\", function () { return React.createElement(ToolBased, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Button } from 'evergreen-ui'\\nimport { storiesOf } from '@storybook/react'\\nimport ConsentManager from '../src/consent-manager'\\nimport * as common from './components/common-react'\\nimport { openConsentManager } from '../src'\\nimport CookieView from './components/CookieView'\\n\\nconst initialPreferences = {\\n  advertising: false,\\n  marketingAndAnalytics: true,\\n  functional: true\\n}\\n\\nconst Custom = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        initialPreferences={initialPreferences}\\n        shouldRequireConsent={() => true}\\n        {...common}\\n      />\\n\\n      <Button marginRight={20} onClick={openConsentManager}>\\n        Change Cookie Preferences\\n      </Button>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Advanced Use Cases', module).add(`Partial consent`, () => <Custom />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/4-custom-consent.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Button } from 'evergreen-ui';\nimport { storiesOf } from '@storybook/react';\nimport ConsentManager from '../src/consent-manager';\nimport * as common from './components/common-react';\nimport { openConsentManager } from '../src';\nimport CookieView from './components/CookieView';\nvar initialPreferences = {\n    advertising: false,\n    marketingAndAnalytics: true,\n    functional: true\n};\nvar Custom = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManager, __assign({ writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", initialPreferences: initialPreferences, shouldRequireConsent: function () { return true; } }, common)),\n        React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Advanced Use Cases', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Partial consent\", function () { return React.createElement(Custom, null); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { CloseBehavior, CloseBehaviorFunction } from '../src/consent-manager/container'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: { closeBehavior: CloseBehavior | CloseBehaviorFunction }) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={props.closeBehavior}\\n        customCategories={{\\n          'Do Not Sell': {\\n            integrations: ['AdWords'],\\n            purpose: 'To give the right to opt out of the sale of personal data.'\\n          }\\n        }}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Custom Categories - Do Not Sell', module)\\n  .add(`Dismiss`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DISMISS} />)\\n  .add(`Accept`, () => <ConsentManagerExample closeBehavior={CloseBehavior.ACCEPT} />)\\n  .add(`Deny`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DENY} />)\\n  .add(`Custom Close Behavior`, () => (\\n    <ConsentManagerExample\\n      closeBehavior={categories => ({\\n        ...categories,\\n        'Do Not Sell': false\\n      })}\\n    />\\n  ))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/5-custom-categories.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: props.closeBehavior, customCategories: {\n                'Do Not Sell': {\n                    integrations: ['AdWords'],\n                    purpose: 'To give the right to opt out of the sale of personal data.'\n                }\n            } }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Custom Categories - Do Not Sell', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Dismiss\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"dismiss\" /* DISMISS */ }); })\n    .add(\"Accept\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"accept\" /* ACCEPT */ }); })\n    .add(\"Deny\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"deny\" /* DENY */ }); })\n    .add(\"Custom Close Behavior\", function () { return (React.createElement(ConsentManagerExample, { closeBehavior: function (categories) { return (__assign(__assign({}, categories), { 'Do Not Sell': false })); } })); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\nimport inRegions from '@segment/in-regions'\\nimport { CloseBehavior } from '../src/consent-manager/container'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = () => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  const inCA = inRegions(['CA'])\\n  const inEU = inRegions(['EU'])\\n  const shouldRequireConsent = inRegions(['CA', 'EU'])\\n  const caDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: true,\\n    functional: true\\n  }\\n  const euDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: false,\\n    functional: false\\n  }\\n\\n  const closeBehavior = inCA()\\n    ? _categories => caDefaultPreferences\\n    : inEU()\\n      ? CloseBehavior.DENY\\n      : CloseBehavior.ACCEPT\\n\\n  const initialPreferences = inCA()\\n    ? caDefaultPreferences\\n    : inEU()\\n      ? euDefaultPreferences\\n      : undefined\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\\\"\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={closeBehavior}\\n        shouldRequireConsent={shouldRequireConsent}\\n        initialPreferences={initialPreferences}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n        <Button onClick={() => window.analytics.track('Send Track Event Clicked')}>\\n          Send Track Event\\n        </Button>\\n\\n        <Paragraph marginTop={20}>\\n          This example highlights checking for EU or CA residency, then changing the closeBehavior\\n          based on membership in each.\\n        </Paragraph>\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('CCPA + GDPR Example', module).add(`Basic`, () => <ConsentManagerExample />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/6-ccpa-gdpr-example.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nimport inRegions from '@segment/in-regions';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function () {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    var inCA = inRegions(['CA']);\n    var inEU = inRegions(['EU']);\n    var shouldRequireConsent = inRegions(['CA', 'EU']);\n    var caDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: true,\n        functional: true\n    };\n    var euDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: false,\n        functional: false\n    };\n    var closeBehavior = inCA()\n        ? function (_categories) { return caDefaultPreferences; }\n        : inEU()\n            ? \"deny\" /* DENY */\n            : \"accept\" /* ACCEPT */;\n    var initialPreferences = inCA()\n        ? caDefaultPreferences\n        : inEU()\n            ? euDefaultPreferences\n            : undefined;\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\", bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: closeBehavior, shouldRequireConsent: shouldRequireConsent, initialPreferences: initialPreferences }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(Button, { onClick: function () { return window.analytics.track('Send Track Event Clicked'); } }, \"Send Track Event\"),\n            React.createElement(Paragraph, { marginTop: 20 }, \"This example highlights checking for EU or CA residency, then changing the closeBehavior based on membership in each.\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('CCPA + GDPR Example', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Basic\", function () { return React.createElement(ConsentManagerExample, null); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences, DefaultDestinationBehavior } from '../src/types'\\nimport CookieView from './components/CookieView'\\nimport { CloseBehavior } from '../src/consent-manager/container'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: {\\n  defaultDestinationBehavior: DefaultDestinationBehavior\\n}) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"VeSvGsFntmbyoQ3wh9FJphKGpPNW2paD\\\"\\n        otherWriteKeys={[]}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={CloseBehavior.ACCEPT}\\n        defaultDestinationBehavior={props.defaultDestinationBehavior}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <Paragraph marginTop={20}>\\n          This example highlights default destination behavior. The cookie set is missing a\\n          destination that is enabled on the source, imitating a newly added destination. In the\\n          console, verify behavior by looking at analytics.options.\\n        </Paragraph>\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              window.location.reload()\\n            }}\\n          >\\n            Reset Example\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Default Destination Behavior', module).add(`disable`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"disable\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`enable`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"enable\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`imply`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"imply\\\" />\\n))\\nstoriesOf('Default Destination Behavior', module).add(`ask`, () => (\\n  <ConsentManagerExample defaultDestinationBehavior=\\\"ask\\\" />\\n))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/7-default-destination-behavior.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"VeSvGsFntmbyoQ3wh9FJphKGpPNW2paD\", otherWriteKeys: [], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: \"accept\" /* ACCEPT */, defaultDestinationBehavior: props.defaultDestinationBehavior }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(Paragraph, { marginTop: 20 }, \"This example highlights default destination behavior. The cookie set is missing a destination that is enabled on the source, imitating a newly added destination. In the console, verify behavior by looking at analytics.options.\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        window.location.reload();\n                    } }, \"Reset Example\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"disable\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"disable\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"enable\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"enable\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"imply\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"imply\" })); });\nstoriesOf('Default Destination Behavior', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"ask\", function () { return (React.createElement(ConsentManagerExample, { defaultDestinationBehavior: \"ask\" })); });\n","// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\nimport inRegions from '@segment/in-regions'\\nimport { CloseBehavior } from '../src/consent-manager/container'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'You can manage your preferences here!'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerMixpanel = (props: { enabled: boolean }) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  const inCA = inRegions(['CA'])\\n  const inEU = inRegions(['EU'])\\n  const shouldRequireConsent = inRegions(['CA', 'EU'])\\n  const caDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: true,\\n    functional: true\\n  }\\n  const euDefaultPreferences = {\\n    advertising: false,\\n    marketingAndAnalytics: false,\\n    functional: false\\n  }\\n\\n  const closeBehavior = inCA()\\n    ? _categories => caDefaultPreferences\\n    : inEU()\\n    ? CloseBehavior.DENY\\n    : CloseBehavior.ACCEPT\\n\\n  const initialPreferences = inCA()\\n    ? caDefaultPreferences\\n    : inEU()\\n    ? euDefaultPreferences\\n    : undefined\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\\\"\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={closeBehavior}\\n        shouldRequireConsent={shouldRequireConsent}\\n        initialPreferences={initialPreferences}\\n        mixpanelToken=\\\"7b189d5f466a3d0a3027c71d1726fa18\\\"\\n        mixpanelTracking={props.enabled}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Cute Cats </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n        <Button onClick={() => window.analytics.track('Send Track Event Clicked')}>\\n          Send Track Event\\n        </Button>\\n\\n        <Paragraph marginTop={20}>\\n          This example is to show the custom events we track with Mixpanel.\\n        </Paragraph>\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Mixpanel custom events', module)\\n  .add(`Tracking enabled`, () => <ConsentManagerMixpanel enabled={true} />)\\n  .add(`Tracking disabled`, () => <ConsentManagerMixpanel enabled={false} />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/8-mixpanel-custom-events.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Paragraph, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nimport inRegions from '@segment/in-regions';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'You can manage your preferences here!';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerMixpanel = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    var inCA = inRegions(['CA']);\n    var inEU = inRegions(['EU']);\n    var shouldRequireConsent = inRegions(['CA', 'EU']);\n    var caDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: true,\n        functional: true\n    };\n    var euDefaultPreferences = {\n        advertising: false,\n        marketingAndAnalytics: false,\n        functional: false\n    };\n    var closeBehavior = inCA()\n        ? function (_categories) { return caDefaultPreferences; }\n        : inEU()\n            ? \"deny\" /* DENY */\n            : \"accept\" /* ACCEPT */;\n    var initialPreferences = inCA()\n        ? caDefaultPreferences\n        : inEU()\n            ? euDefaultPreferences\n            : undefined;\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU\", bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: closeBehavior, shouldRequireConsent: shouldRequireConsent, initialPreferences: initialPreferences, mixpanelToken: \"7b189d5f466a3d0a3027c71d1726fa18\", mixpanelTracking: props.enabled }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Cute Cats \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(Button, { onClick: function () { return window.analytics.track('Send Track Event Clicked'); } }, \"Send Track Event\"),\n            React.createElement(Paragraph, { marginTop: 20 }, \"This example is to show the custom events we track with Mixpanel.\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Mixpanel custom events', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Tracking enabled\", function () { return React.createElement(ConsentManagerMixpanel, { enabled: true }); })\n    .add(\"Tracking disabled\", function () { return React.createElement(ConsentManagerMixpanel, { enabled: false }); });\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport { Pane, Button } from 'evergreen-ui'\\nimport { storiesOf } from '@storybook/react'\\nimport ConsentManager from '../src/consent-manager'\\nimport * as common from './components/common-react'\\nimport { openConsentManager } from '../src'\\nimport CookieView from './components/CookieView'\\n\\nconst initialPreferences = {\\n  advertising: false,\\n  marketingAndAnalytics: false,\\n  functional: false\\n}\\n\\nconst Custom = () => {\\n  return (\\n    <Pane maxWidth={1000} margin={30}>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        initialPreferences={initialPreferences}\\n        shouldRequireConsent={() => true}\\n        bannerHeading={\\n          <>\\n            Diese Cookies{' '}\\n            <span role=\\\"img\\\" aria-label=\\\"cookie\\\">\\n              🍪\\n            </span>{' '}\\n            haben null Kalorien.\\n          </>\\n        }\\n        {...common}\\n      />\\n\\n      <Button marginRight={20} onClick={openConsentManager}>\\n        Change Cookie Preferences\\n      </Button>\\n\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('Heading', module).add(`Basic`, () => <Custom />)\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/9-heading.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport { Pane, Button } from 'evergreen-ui';\nimport { storiesOf } from '@storybook/react';\nimport ConsentManager from '../src/consent-manager';\nimport * as common from './components/common-react';\nimport { openConsentManager } from '../src';\nimport CookieView from './components/CookieView';\nvar initialPreferences = {\n    advertising: false,\n    marketingAndAnalytics: false,\n    functional: false\n};\nvar Custom = function () {\n    return (React.createElement(Pane, { maxWidth: 1000, margin: 30 },\n        React.createElement(ConsentManager, __assign({ writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", initialPreferences: initialPreferences, shouldRequireConsent: function () { return true; }, bannerHeading: React.createElement(React.Fragment, null,\n                \"Diese Cookies\",\n                ' ',\n                React.createElement(\"span\", { role: \"img\", \"aria-label\": \"cookie\" }, \"\\uD83C\\uDF6A\"),\n                ' ',\n                \"haben null Kalorien.\") }, common)),\n        React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('Heading', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__)).add(\"Basic\", function () { return React.createElement(Custom, null); });\n","import React, { useEffect, useState } from 'react';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport cookies from 'js-cookie';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nvar CookieView = function () {\n    var _a = useState(cookies.getJSON()), cookieVal = _a[0], updateCookieVal = _a[1];\n    useEffect(function () {\n        var clear = setInterval(function () {\n            updateCookieVal(cookies.getJSON());\n        }, 1000);\n        return function () { return clearInterval(clear); };\n    });\n    return (React.createElement(Pane, { marginTop: 30 },\n        React.createElement(Heading, null, \"Cookies:\"),\n        React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(cookieVal, null, 2)),\n        React.createElement(Button, { onClick: function () {\n                var allCookies = cookies.getJSON();\n                Object.keys(allCookies).forEach(function (key) {\n                    cookies.remove(key);\n                });\n                window.location.reload();\n            } }, \"Clear \\uD83E\\uDDF9\\uD83C\\uDF6A\")));\n};\nexport default CookieView;\n","import CMB from './consent-manager-builder';\nimport CM from './consent-manager';\nexport { openDialog as openConsentManager } from './consent-manager/container';\nexport { loadPreferences, savePreferences, onPreferencesSaved } from './consent-manager-builder/preferences';\nexport var ConsentManagerBuilder = CMB;\nexport var ConsentManager = CM;\nexport function doNotTrack() {\n    if (typeof window !== 'undefined' && (window.navigator || navigator)) {\n        var nav = navigator;\n        var doNotTrackValue = nav.doNotTrack || window.doNotTrack || nav.msDoNotTrack;\n        // Normalise Firefox < 32\n        // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/doNotTrack\n        if (doNotTrackValue === 'yes') {\n            doNotTrackValue = '1';\n        }\n        else if (doNotTrackValue === 'no') {\n            doNotTrackValue = '0';\n        }\n        if (doNotTrackValue === '1') {\n            return true;\n        }\n        if (doNotTrackValue === '0') {\n            return false;\n        }\n    }\n    return null;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Li, Text, Link, Checkbox, Card } from 'evergreen-ui';\nexport default function Destination(_a) {\n    var destination = _a.destination, preferences = _a.preferences, setPreferences = _a.setPreferences;\n    return (React.createElement(Li, { maxWidth: 280, marginRight: 20 },\n        React.createElement(Card, { elevation: 1, padding: 20, paddingTop: 8 },\n            React.createElement(Checkbox, { label: React.createElement(Link, { href: destination.website, target: \"_blank\" }, destination.name), checked: Boolean(preferences[destination.id]), onChange: function () {\n                    var _a;\n                    return setPreferences((_a = {},\n                        _a[destination.id] = !preferences[destination.id],\n                        _a));\n                } }),\n            React.createElement(Text, { display: \"block\", size: 300 }, destination.description))));\n}\nDestination.propTypes = {\n    destination: PropTypes.object.isRequired,\n    preferences: PropTypes.object.isRequired,\n    setPreferences: PropTypes.func.isRequired\n};\n","// TODO: remove duplicate cookie library from bundle\nimport cookies from 'js-cookie';\nimport topDomain from '@segment/top-domain';\nimport { EventEmitter } from 'events';\nvar COOKIE_KEY = 'tracking-preferences';\n// TODO: Make cookie expiration configurable\nvar COOKIE_EXPIRES = 365;\n// TODO: harden against invalid cookies\n// TODO: harden against different versions of cookies\nexport function loadPreferences() {\n    var preferences = cookies.getJSON(COOKIE_KEY);\n    if (!preferences) {\n        return {};\n    }\n    return {\n        destinationPreferences: preferences.destinations,\n        customPreferences: preferences.custom\n    };\n}\nvar emitter = new EventEmitter();\n/**\n * Subscribes to consent preferences changing over time and returns\n * a cleanup function that can be invoked to remove the instantiated listener.\n *\n * @param listener a function to be invoked when ConsentPreferences are saved\n */\nexport function onPreferencesSaved(listener) {\n    emitter.on('preferencesSaved', listener);\n    return function () { return emitter.off('preferencesSaved', listener); };\n}\nexport function savePreferences(_a) {\n    var destinationPreferences = _a.destinationPreferences, customPreferences = _a.customPreferences, cookieDomain = _a.cookieDomain;\n    var wd = window;\n    if (wd.analytics) {\n        wd.analytics.identify({\n            destinationTrackingPreferences: destinationPreferences,\n            customTrackingPreferences: customPreferences\n        });\n    }\n    var domain = cookieDomain || topDomain(window.location.href);\n    var value = {\n        version: 1,\n        destinations: destinationPreferences,\n        custom: customPreferences\n    };\n    cookies.set(COOKIE_KEY, value, {\n        expires: COOKIE_EXPIRES,\n        domain: domain\n    });\n    emitter.emit('preferencesSaved', {\n        destinationPreferences: destinationPreferences,\n        customPreferences: customPreferences\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport fetch from 'isomorphic-fetch';\nimport { flatten, sortedUniqBy, sortBy } from 'lodash';\nfunction fetchDestinationForWriteKey(cdnHost, writeKey) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, destinations, _i, destinations_1, destination;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(\"https://\" + cdnHost + \"/v1/projects/\" + writeKey + \"/integrations\")];\n                case 1:\n                    res = _a.sent();\n                    if (!res.ok) {\n                        throw new Error(\"Failed to fetch integrations for write key \" + writeKey + \": HTTP \" + res.status + \" \" + res.statusText);\n                    }\n                    return [4 /*yield*/, res.json()\n                        // Rename creationName to id to abstract the weird data model\n                    ];\n                case 2:\n                    destinations = _a.sent();\n                    // Rename creationName to id to abstract the weird data model\n                    for (_i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n                        destination = destinations_1[_i];\n                        destination.id = destination.creationName;\n                        delete destination.creationName;\n                    }\n                    return [2 /*return*/, destinations];\n            }\n        });\n    });\n}\nexport default function fetchDestinations(cdnHost, writeKeys) {\n    return __awaiter(this, void 0, void 0, function () {\n        var destinationsRequests, _i, writeKeys_1, writeKey, destinations, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    destinationsRequests = [];\n                    for (_i = 0, writeKeys_1 = writeKeys; _i < writeKeys_1.length; _i++) {\n                        writeKey = writeKeys_1[_i];\n                        destinationsRequests.push(fetchDestinationForWriteKey(cdnHost, writeKey));\n                    }\n                    _a = flatten;\n                    return [4 /*yield*/, Promise.all(destinationsRequests)];\n                case 1:\n                    destinations = _a.apply(void 0, [_b.sent()]);\n                    // Remove the dummy Repeater destination\n                    destinations = destinations.filter(function (d) { return d.id !== 'Repeater'; });\n                    destinations = sortBy(destinations, ['id']);\n                    destinations = sortedUniqBy(destinations, 'id');\n                    return [2 /*return*/, destinations];\n            }\n        });\n    });\n}\n","function getConsentMiddleware(destinationPreferences, categoryPreferences, defaultDestinationBehavior) {\n    return function (_a) {\n        var payload = _a.payload, next = _a.next;\n        payload.obj.context.consent = {\n            defaultDestinationBehavior: defaultDestinationBehavior,\n            categoryPreferences: categoryPreferences,\n            destinationPreferences: destinationPreferences\n        };\n        next(payload);\n    };\n}\nexport default function conditionallyLoadAnalytics(_a) {\n    var writeKey = _a.writeKey, destinations = _a.destinations, destinationPreferences = _a.destinationPreferences, isConsentRequired = _a.isConsentRequired, _b = _a.shouldReload, shouldReload = _b === void 0 ? true : _b, defaultDestinationBehavior = _a.defaultDestinationBehavior, categoryPreferences = _a.categoryPreferences;\n    var wd = window;\n    var integrations = { All: false, 'Segment.io': true };\n    var isAnythingEnabled = false;\n    if (!destinationPreferences) {\n        if (isConsentRequired) {\n            return;\n        }\n        // Load a.js normally when consent isn't required and there's no preferences\n        if (!wd.analytics.initialized) {\n            wd.analytics.load(writeKey);\n        }\n        return;\n    }\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        // Was a preference explicitly set on this destination?\n        var explicitPreference = destination.id in destinationPreferences;\n        if (!explicitPreference && defaultDestinationBehavior === 'enable') {\n            integrations[destination.id] = true;\n            continue;\n        }\n        var isEnabled = Boolean(destinationPreferences[destination.id]);\n        if (isEnabled) {\n            isAnythingEnabled = true;\n        }\n        integrations[destination.id] = isEnabled;\n    }\n    // Reload the page if the trackers have already been initialised so that\n    // the user's new preferences can take affect\n    if (wd.analytics && wd.analytics.initialized) {\n        if (shouldReload) {\n            window.location.reload();\n        }\n        return;\n    }\n    // Don't load a.js at all if nothing has been enabled\n    if (isAnythingEnabled) {\n        var middleware = getConsentMiddleware(destinationPreferences, categoryPreferences, defaultDestinationBehavior);\n        // @ts-ignore: Analytics.JS type should be updated with addSourceMiddleware\n        wd.analytics.addSourceMiddleware(middleware);\n        wd.analytics.load(writeKey, { integrations: integrations });\n    }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Component } from 'react';\nimport mixpanel from 'mixpanel-browser';\nimport { loadPreferences, savePreferences } from './preferences';\nimport fetchDestinations from './fetch-destinations';\nimport conditionallyLoadAnalytics from './analytics';\nfunction getNewDestinations(destinations, preferences) {\n    var newDestinations = [];\n    // If there are no preferences then all destinations are new\n    if (!preferences) {\n        return destinations;\n    }\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        if (preferences[destination.id] === undefined) {\n            newDestinations.push(destination);\n        }\n    }\n    return newDestinations;\n}\nvar ConsentManagerBuilder = /** @class */ (function (_super) {\n    __extends(ConsentManagerBuilder, _super);\n    function ConsentManagerBuilder() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            isLoading: true,\n            destinations: [],\n            newDestinations: [],\n            preferences: {},\n            destinationPreferences: {},\n            isConsentRequired: true,\n            havePreferencesChanged: false,\n            workspaceAddedNewDestinations: false\n        };\n        _this.initialise = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a, writeKey, _b, otherWriteKeys, _c, shouldRequireConsent, initialPreferences, mapCustomPreferences, defaultDestinationBehavior, cookieDomain, _d, cdnHost, _e, destinationPreferences, customPreferences, _f, isConsentRequired, destinations, newDestinations, workspaceAddedNewDestinations, preferences, hasInitialPreferenceToTrue, emptyCustomPreferecences, mapped;\n            return __generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        if (this.props.mixpanelTracking) {\n                            mixpanel.track('banner_viewed');\n                        }\n                        _a = this.props, writeKey = _a.writeKey, _b = _a.otherWriteKeys, otherWriteKeys = _b === void 0 ? ConsentManagerBuilder.defaultProps.otherWriteKeys : _b, _c = _a.shouldRequireConsent, shouldRequireConsent = _c === void 0 ? ConsentManagerBuilder.defaultProps.shouldRequireConsent : _c, initialPreferences = _a.initialPreferences, mapCustomPreferences = _a.mapCustomPreferences, defaultDestinationBehavior = _a.defaultDestinationBehavior, cookieDomain = _a.cookieDomain, _d = _a.cdnHost, cdnHost = _d === void 0 ? ConsentManagerBuilder.defaultProps.cdnHost : _d;\n                        _e = loadPreferences(), destinationPreferences = _e.destinationPreferences, customPreferences = _e.customPreferences;\n                        return [4 /*yield*/, Promise.all([\n                                shouldRequireConsent(),\n                                fetchDestinations(cdnHost, __spreadArrays([writeKey], otherWriteKeys))\n                            ])];\n                    case 1:\n                        _f = _g.sent(), isConsentRequired = _f[0], destinations = _f[1];\n                        newDestinations = getNewDestinations(destinations, destinationPreferences || {});\n                        workspaceAddedNewDestinations = destinationPreferences &&\n                            Object.keys(destinationPreferences).length > 0 &&\n                            newDestinations.length > 0;\n                        if (mapCustomPreferences) {\n                            preferences = customPreferences || initialPreferences || {};\n                            hasInitialPreferenceToTrue = Object.values(initialPreferences || {}).some(Boolean);\n                            emptyCustomPreferecences = Object.values(customPreferences || {}).every(function (v) { return v === null || v === undefined; });\n                            if ((hasInitialPreferenceToTrue && emptyCustomPreferecences) ||\n                                (defaultDestinationBehavior === 'imply' && workspaceAddedNewDestinations)) {\n                                mapped = mapCustomPreferences(destinations, preferences);\n                                destinationPreferences = mapped.destinationPreferences;\n                                customPreferences = mapped.customPreferences;\n                                savePreferences({ destinationPreferences: destinationPreferences, customPreferences: customPreferences, cookieDomain: cookieDomain });\n                            }\n                        }\n                        else {\n                            preferences = destinationPreferences || initialPreferences;\n                        }\n                        conditionallyLoadAnalytics({\n                            writeKey: writeKey,\n                            destinations: destinations,\n                            destinationPreferences: destinationPreferences,\n                            isConsentRequired: isConsentRequired,\n                            defaultDestinationBehavior: defaultDestinationBehavior,\n                            categoryPreferences: preferences\n                        });\n                        this.setState({\n                            isLoading: false,\n                            destinations: destinations,\n                            newDestinations: newDestinations,\n                            preferences: preferences,\n                            isConsentRequired: isConsentRequired,\n                            destinationPreferences: destinationPreferences,\n                            workspaceAddedNewDestinations: Boolean(workspaceAddedNewDestinations)\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.handleSetPreferences = function (newPreferences) {\n            _this.setState(function (prevState) {\n                var destinations = prevState.destinations, existingPreferences = prevState.preferences;\n                var preferences = _this.mergePreferences({\n                    destinations: destinations,\n                    newPreferences: newPreferences,\n                    existingPreferences: existingPreferences\n                });\n                return __assign(__assign({}, prevState), { preferences: preferences, havePreferencesChanged: true });\n            });\n        };\n        _this.handleResetPreferences = function () {\n            var _a = _this.props, initialPreferences = _a.initialPreferences, mapCustomPreferences = _a.mapCustomPreferences;\n            var _b = loadPreferences(), destinationPreferences = _b.destinationPreferences, customPreferences = _b.customPreferences;\n            var preferences;\n            if (mapCustomPreferences) {\n                preferences = customPreferences || initialPreferences;\n            }\n            else {\n                preferences = destinationPreferences || initialPreferences;\n            }\n            _this.setState({ preferences: preferences });\n        };\n        _this.handleSaveConsent = function (newPreferences, shouldReload) {\n            var _a = _this.props, writeKey = _a.writeKey, cookieDomain = _a.cookieDomain, mapCustomPreferences = _a.mapCustomPreferences, defaultDestinationBehavior = _a.defaultDestinationBehavior;\n            _this.setState(function (prevState) {\n                var destinations = prevState.destinations, existingPreferences = prevState.preferences, isConsentRequired = prevState.isConsentRequired;\n                var preferences = _this.mergePreferences({\n                    destinations: destinations,\n                    newPreferences: newPreferences,\n                    existingPreferences: existingPreferences\n                });\n                var destinationPreferences;\n                var customPreferences;\n                if (mapCustomPreferences) {\n                    var custom = mapCustomPreferences(destinations, preferences);\n                    destinationPreferences = custom.destinationPreferences;\n                    customPreferences = custom.customPreferences;\n                    if (customPreferences) {\n                        // Allow the customPreferences to be updated from mapCustomPreferences\n                        preferences = customPreferences;\n                    }\n                    else {\n                        // Make returning the customPreferences from mapCustomPreferences optional\n                        customPreferences = preferences;\n                    }\n                }\n                else {\n                    destinationPreferences = preferences;\n                }\n                var newDestinations = getNewDestinations(destinations, destinationPreferences);\n                // Additional check so that we also save first time preferences\n                var preferenceCookie = loadPreferences();\n                var hasPreferenceCookie = preferenceCookie && Object.keys(preferenceCookie).length > 0;\n                // If preferences haven't changed, don't reload the page as it's a disruptive experience for end-users\n                if (prevState.havePreferencesChanged || newDestinations.length > 0 || !hasPreferenceCookie) {\n                    savePreferences({ destinationPreferences: destinationPreferences, customPreferences: customPreferences, cookieDomain: cookieDomain });\n                    conditionallyLoadAnalytics({\n                        writeKey: writeKey,\n                        destinations: destinations,\n                        destinationPreferences: destinationPreferences,\n                        isConsentRequired: isConsentRequired,\n                        shouldReload: shouldReload,\n                        defaultDestinationBehavior: defaultDestinationBehavior,\n                        categoryPreferences: customPreferences\n                    });\n                }\n                return __assign(__assign({}, prevState), { destinationPreferences: destinationPreferences, preferences: preferences, newDestinations: newDestinations });\n            });\n        };\n        _this.mergePreferences = function (args) {\n            var destinations = args.destinations, existingPreferences = args.existingPreferences, newPreferences = args.newPreferences;\n            var preferences;\n            if (typeof newPreferences === 'boolean') {\n                var destinationPreferences = {};\n                for (var _i = 0, destinations_2 = destinations; _i < destinations_2.length; _i++) {\n                    var destination = destinations_2[_i];\n                    destinationPreferences[destination.id] = newPreferences;\n                }\n                preferences = destinationPreferences;\n            }\n            else if (newPreferences) {\n                preferences = __assign(__assign({}, existingPreferences), newPreferences);\n            }\n            else {\n                preferences = existingPreferences;\n            }\n            return preferences;\n        };\n        return _this;\n    }\n    ConsentManagerBuilder.prototype.render = function () {\n        var _a = this.props, children = _a.children, customCategories = _a.customCategories;\n        var _b = this.state, isLoading = _b.isLoading, destinations = _b.destinations, preferences = _b.preferences, newDestinations = _b.newDestinations, isConsentRequired = _b.isConsentRequired, havePreferencesChanged = _b.havePreferencesChanged, workspaceAddedNewDestinations = _b.workspaceAddedNewDestinations, destinationPreferences = _b.destinationPreferences;\n        if (isLoading) {\n            return null;\n        }\n        return children({\n            destinations: destinations,\n            customCategories: customCategories,\n            newDestinations: newDestinations,\n            preferences: preferences,\n            isConsentRequired: isConsentRequired,\n            havePreferencesChanged: havePreferencesChanged,\n            workspaceAddedNewDestinations: workspaceAddedNewDestinations,\n            destinationPreferences: destinationPreferences,\n            setPreferences: this.handleSetPreferences,\n            resetPreferences: this.handleResetPreferences,\n            saveConsent: this.handleSaveConsent\n        });\n    };\n    ConsentManagerBuilder.prototype.componentDidMount = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var onError, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        onError = this.props.onError;\n                        if (!(onError && typeof onError === 'function')) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 5]);\n                        return [4 /*yield*/, this.initialise()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        e_1 = _a.sent();\n                        return [4 /*yield*/, onError(e_1)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 5: return [3 /*break*/, 8];\n                    case 6: return [4 /*yield*/, this.initialise()];\n                    case 7:\n                        _a.sent();\n                        _a.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ConsentManagerBuilder.displayName = 'ConsentManagerBuilder';\n    ConsentManagerBuilder.defaultProps = {\n        otherWriteKeys: [],\n        onError: undefined,\n        shouldRequireConsent: function () { return true; },\n        initialPreferences: {},\n        cdnHost: 'cdn.segment.com'\n    };\n    return ConsentManagerBuilder;\n}(Component));\nexport default ConsentManagerBuilder;\n","export default \"<html lang=\\\"en\\\">\\n  <body>\\n    <div id=\\\"consent-manager\\\"></div>\\n    <img src=\\\"https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif\\\" />\\n\\n    <button\\n      type=\\\"button\\\"\\n      onclick=\\\"event.stopPropagation(); window.consentManager.openConsentManager()\\\"\\n    >\\n      Data Collection and Cookie Preferences\\n    </button>\\n\\n    <script type=\\\"application/javascript\\\">\\n      window.consentManagerConfig = function(exports) {\\n        return {\\n          container: '#consent-manager',\\n          writeKey: 'tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0',\\n          bannerContent:\\n            'We use cookies (and other similar technologies) to collect data to improve your experience on our site.',\\n          bannerSubContent: 'You can change your preferences at any time.',\\n          preferencesDialogTitle: 'Website Data Collection Preferences',\\n          preferencesDialogContent:\\n            'We use data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.',\\n          cancelDialogTitle: 'Are you sure you want to cancel?',\\n          cancelDialogContent:\\n            \\\"Your preferences have not been saved. By continuing to use our website, you're agreeing to our Website Data Collection Policy\\\",\\n          closeBehavior: 'accept'\\n        }\\n      }\\n    </script>\\n\\n    <!-- Setup the Segment Consent Manager tag -->\\n    <script src=\\\"./standalone/consent-manager.js\\\" defer></script>\\n\\n    <!-- Load analytics.js -->\\n    <script>\\n      !(function() {\\n        var analytics = (window.analytics = window.analytics || [])\\n        if (!analytics.initialize)\\n          if (analytics.invoked)\\n            window.console && console.error && console.error('Segment snippet included twice.')\\n          else {\\n            analytics.invoked = !0\\n            analytics.methods = [\\n              'trackSubmit',\\n              'trackClick',\\n              'trackLink',\\n              'trackForm',\\n              'pageview',\\n              'identify',\\n              'reset',\\n              'group',\\n              'track',\\n              'ready',\\n              'alias',\\n              'debug',\\n              'page',\\n              'once',\\n              'off',\\n              'on',\\n              'addSourceMiddleware'\\n            ]\\n            analytics.factory = function(t) {\\n              return function() {\\n                var e = Array.prototype.slice.call(arguments)\\n                e.unshift(t)\\n                analytics.push(e)\\n                return analytics\\n              }\\n            }\\n            for (var t = 0; t < analytics.methods.length; t++) {\\n              var e = analytics.methods[t]\\n              analytics[e] = analytics.factory(e)\\n            }\\n            analytics.load = function(t, e) {\\n              var n = document.createElement('script')\\n              n.type = 'text/javascript'\\n              n.async = !0\\n              n.src =\\n                ('https:' === document.location.protocol ? 'https://' : 'http://') +\\n                'cdn.segment.com/analytics.js/v1/' +\\n                t +\\n                '/analytics.min.js'\\n              var o = document.getElementsByTagName('script')[0]\\n              o.parentNode.insertBefore(n, o)\\n              analytics._loadOptions = e\\n            }\\n            analytics.SNIPPET_VERSION = '4.1.0'\\n            analytics.page()\\n          }\\n      })()\\n    </script>\\n  </body>\\n</html>\\n\"","export default \"<html lang=\\\"en\\\">\\n  <body>\\n    <script type=\\\"application/javascript\\\">\\n      window.consentManagerConfig = function(exports) {\\n        exports.preferences.onPreferencesSaved(function(prefs) {\\n          // could be used to store consent server side, or send it into an API\\n        })\\n\\n        return {\\n          container: '#consent-manager',\\n          writeKey: 'n2DAIaakJzCUq0saLY0LMcm9dKsqCZvU',\\n          /* initialPreferences allows for customizing which categories already pre-loaded */\\n          initialPreferences: {\\n            marketingAndAnalytics: false,\\n            // functional: true will automatically record consent for functional cookies\\n            functional: true\\n          },\\n          /*\\n      The consent manager ships with a lightweight version of \\n      React (preact) that you can use to customize the consent manager further\\n    */\\n          bannerContent: exports.React.createElement('span', null, '🍪We like cookies 🍪'),\\n          bannerSubContent: 'Change your preferences 👻',\\n          preferencesDialogTitle: 'Website Data Collection',\\n          preferencesDialogContent: 'We use data collected by cookies and JavaScript libraries.',\\n          cancelDialogTitle: '🤔Are you sure you want to cancel?',\\n          cancelDialogContent: 'Your preferences have not been saved.'\\n        }\\n      }\\n    </script>\\n\\n    <div id=\\\"consent-manager\\\"></div>\\n\\n    <div>\\n      <img src=\\\"http://giphygifs.s3.amazonaws.com/media/13HBDT4QSTpveU/giphy.gif\\\" />\\n    </div>\\n\\n    <button\\n      type=\\\"button\\\"\\n      onclick=\\\"event.stopPropagation(); window.consentManager.openConsentManager()\\\"\\n    >\\n      Data Collection and Cookie Preferences\\n    </button>\\n\\n    <script src=\\\"./standalone/consent-manager.js\\\" defer></script>\\n\\n    <!-- Load analytics.js -->\\n    <script>\\n      !(function() {\\n        var analytics = (window.analytics = window.analytics || [])\\n        if (!analytics.initialize)\\n          if (analytics.invoked)\\n            window.console && console.error && console.error('Segment snippet included twice.')\\n          else {\\n            analytics.invoked = !0\\n            analytics.methods = [\\n              'trackSubmit',\\n              'trackClick',\\n              'trackLink',\\n              'trackForm',\\n              'pageview',\\n              'identify',\\n              'reset',\\n              'group',\\n              'track',\\n              'ready',\\n              'alias',\\n              'debug',\\n              'page',\\n              'once',\\n              'off',\\n              'on',\\n              'addSourceMiddleware'\\n            ]\\n            analytics.factory = function(t) {\\n              return function() {\\n                var e = Array.prototype.slice.call(arguments)\\n                e.unshift(t)\\n                analytics.push(e)\\n                return analytics\\n              }\\n            }\\n            for (var t = 0; t < analytics.methods.length; t++) {\\n              var e = analytics.methods[t]\\n              analytics[e] = analytics.factory(e)\\n            }\\n            analytics.load = function(t, e) {\\n              var n = document.createElement('script')\\n              n.type = 'text/javascript'\\n              n.async = !0\\n              n.src =\\n                ('https:' === document.location.protocol ? 'https://' : 'http://') +\\n                'cdn.segment.com/analytics.js/v1/' +\\n                t +\\n                '/analytics.min.js'\\n              var o = document.getElementsByTagName('script')[0]\\n              o.parentNode.insertBefore(n, o)\\n              analytics._loadOptions = e\\n            }\\n            analytics.SNIPPET_VERSION = '4.1.0'\\n            analytics.page()\\n          }\\n      })()\\n    </script>\\n  </body>\\n</html>\\n\"","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport { css } from 'react-emotion';\nexport default css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,\\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\\n  -moz-osx-font-smoothing: grayscale;\\n  -webkit-font-smoothing: antialiased;\\n  font-smoothing: antialiased;\\n  color: #435a6f;\\n  font-size: 16px;\\n  font-weight: 400;\\n  line-height: 22px;\\n  letter-spacing: -0.05px;\\n\"], [\"\\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,\\n    sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\\n  -moz-osx-font-smoothing: grayscale;\\n  -webkit-font-smoothing: antialiased;\\n  font-smoothing: antialiased;\\n  color: #435a6f;\\n  font-size: 16px;\\n  font-weight: 400;\\n  line-height: 22px;\\n  letter-spacing: -0.05px;\\n\"])));\nvar templateObject_1;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport styled from 'react-emotion';\nimport fontStyles from './font-styles';\nvar Root = styled('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  \", \";\\n  position: fixed;\\n  bottom: 0;\\n  padding: 24px 32px;\\n  padding-right: 40px;\\n  background: #ffffff;\\n  color: #8f8d8b;\\n  font-size: 14px;\\n  line-height: 1.3;\\n  border-radius: 8px;\\n  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.06), 0px 6px 12px rgba(0, 0, 0, 0.06);\\n  max-width: 90%;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: fit-content;\\n  margin: auto;\\n  overflow-y: scroll;\\n\\n  @media only screen and (min-width: 768px) {\\n    max-width: 50%;\\n  }\\n\"], [\"\\n  \", \";\\n  position: fixed;\\n  bottom: 0;\\n  padding: 24px 32px;\\n  padding-right: 40px;\\n  background: #ffffff;\\n  color: #8f8d8b;\\n  font-size: 14px;\\n  line-height: 1.3;\\n  border-radius: 8px;\\n  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.06), 0px 6px 12px rgba(0, 0, 0, 0.06);\\n  max-width: 90%;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: fit-content;\\n  margin: auto;\\n  overflow-y: scroll;\\n\\n  @media only screen and (min-width: 768px) {\\n    max-width: 50%;\\n  }\\n\"])), fontStyles);\nvar Content = styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: column;\\n  text-align: left;\\n  font-size: 1.2em;\\n\\n  a {\\n    display: inline;\\n    padding: 0;\\n    border: none;\\n    background: none;\\n    color: inherit;\\n    font: inherit;\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\\n  button {\\n    border-radius: 8px;\\n    padding: 12px 16px;\\n    border: none;\\n  }\\n\\n  @media only screen and (min-width: 768px) {\\n    flex-direction: row;\\n    justify-content: space-between;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: column;\\n  text-align: left;\\n  font-size: 1.2em;\\n\\n  a {\\n    display: inline;\\n    padding: 0;\\n    border: none;\\n    background: none;\\n    color: inherit;\\n    font: inherit;\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\\n  button {\\n    border-radius: 8px;\\n    padding: 12px 16px;\\n    border: none;\\n  }\\n\\n  @media only screen and (min-width: 768px) {\\n    flex-direction: row;\\n    justify-content: space-between;\\n  }\\n\"])));\nvar Action = styled('div')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: column-reverse;\\n  justify-content: center;\\n  margin-top: 48px;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-top: 0;\\n    flex-direction: row;\\n    align-items: center;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: column-reverse;\\n  justify-content: center;\\n  margin-top: 48px;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-top: 0;\\n    flex-direction: row;\\n    align-items: center;\\n  }\\n\"])));\nvar SecondaryActions = styled('div')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-top: 0;\\n    align-items: center;\\n  }\\n\"], [\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-top: 0;\\n    align-items: center;\\n  }\\n\"])));\nvar BannerHeading = styled('div')(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  text-align: center;\\n  margin: 0;\\n  font-size: 2em;\\n  font-weight: bold;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\"], [\"\\n  text-align: center;\\n  margin: 0;\\n  font-size: 2em;\\n  font-weight: bold;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\"])));\nvar BannerContent = styled('div')(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  margin: 0;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\\n  @media only screen and (min-width: 768px) {\\n    max-width: 65%;\\n  }\\n\"], [\"\\n  margin: 0;\\n  &:not(:last-child) {\\n    margin-bottom: 6px;\\n  }\\n\\n  @media only screen and (min-width: 768px) {\\n    max-width: 65%;\\n  }\\n\"])));\nvar AcceptButton = styled('button')(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  background-color: #0c826b;\\n  color: #ffffff;\\n  font-weight: 600;\\n  padding: 8px;\\n  margin-bottom: 12px;\\n  @media only screen and (min-width: 768px) {\\n    margin-bottom: 0;\\n  }\\n\"], [\"\\n  background-color: #0c826b;\\n  color: #ffffff;\\n  font-weight: 600;\\n  padding: 8px;\\n  margin-bottom: 12px;\\n  @media only screen and (min-width: 768px) {\\n    margin-bottom: 0;\\n  }\\n\"])));\nvar LinkButton = styled('button')(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  background-color: transparent;\\n  text-decoration: underline;\\n  font-size: 1em;\\n  color: #a5a2a1;\\n  font-weight: 500;\\n  /* margin-bottom: 12px; */\\n  padding: 6px;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-bottom: 0;\\n    margin-right: 8px;\\n  }\\n\"], [\"\\n  background-color: transparent;\\n  text-decoration: underline;\\n  font-size: 1em;\\n  color: #a5a2a1;\\n  font-weight: 500;\\n  /* margin-bottom: 12px; */\\n  padding: 6px;\\n\\n  @media only screen and (min-width: 768px) {\\n    margin-bottom: 0;\\n    margin-right: 8px;\\n  }\\n\"])));\nvar CloseButton = styled('button')(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  position: absolute;\\n  right: 8px;\\n  top: 24px;\\n  transform: translateY(-50%);\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n  color: #191919;\\n\"], [\"\\n  position: absolute;\\n  right: 8px;\\n  top: 24px;\\n  transform: translateY(-50%);\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n  color: #191919;\\n\"])));\nvar Banner = /** @class */ (function (_super) {\n    __extends(Banner, _super);\n    function Banner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Banner.prototype.render = function () {\n        var _a = this.props, innerRef = _a.innerRef, showClose = _a.showClose, onClose = _a.onClose, onAccept = _a.onAccept, onReject = _a.onReject, onChangePreferences = _a.onChangePreferences, heading = _a.heading, content = _a.content, acceptContent = _a.acceptContent, rejectContent = _a.rejectContent, subContent = _a.subContent, backgroundColor = _a.backgroundColor, textColor = _a.textColor;\n        return (React.createElement(Root, { innerRef: innerRef, backgroundColor: backgroundColor, textColor: textColor },\n            heading && React.createElement(BannerHeading, null, heading),\n            React.createElement(Content, null,\n                React.createElement(BannerContent, null, content),\n                React.createElement(Action, null,\n                    React.createElement(SecondaryActions, null,\n                        rejectContent && (React.createElement(LinkButton, { type: \"button\", onClick: onReject }, rejectContent)),\n                        React.createElement(LinkButton, { type: \"button\", onClick: onChangePreferences }, subContent)),\n                    React.createElement(AcceptButton, { type: \"button\", onClick: onAccept }, acceptContent))),\n            showClose && (React.createElement(CloseButton, { type: \"button\", title: \"Close\", \"aria-label\": \"Close\", onClick: onClose }, \"\\u2715\"))));\n    };\n    Banner.displayName = 'Banner';\n    return Banner;\n}(PureComponent));\nexport default Banner;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled, { keyframes } from 'react-emotion';\nimport nanoid from 'nanoid';\nimport fontStyles from './font-styles';\nvar ANIMATION_DURATION = '200ms';\nvar ANIMATION_EASING = 'cubic-bezier(0.0, 0.0, 0.2, 1)';\nvar Overlay = styled('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 9999;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(0, 0, 0, 0.6);\\n\"], [\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 9999;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(0, 0, 0, 0.6);\\n\"])));\nvar openAnimation = keyframes(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  from {\\n    transform: scale(0.8);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n\"], [\"\\n  from {\\n    transform: scale(0.8);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n\"])));\nvar Root = styled('section')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  \", \";\\n  display: flex;\\n  flex-direction: column;\\n  max-width: calc(100vw - 40px);\\n  max-height: calc(100vh - 150px);\\n  width: \", \";\\n  margin: 8px;\\n  background: #fff;\\n  border-radius: 8px;\\n  animation: \", \" \", \" \", \" both;\\n\"], [\"\\n  \", \";\\n  display: flex;\\n  flex-direction: column;\\n  max-width: calc(100vw - 40px);\\n  max-height: calc(100vh - 150px);\\n  width: \", \";\\n  margin: 8px;\\n  background: #fff;\\n  border-radius: 8px;\\n  animation: \", \" \", \" \", \" both;\\n\"])), fontStyles, function (props) { return props.width; }, openAnimation, ANIMATION_DURATION, ANIMATION_EASING);\nvar Form = styled('form')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 0;\\n\"], [\"\\n  display: flex;\\n  flex-direction: column;\\n  min-height: 0;\\n\"])));\nvar Header = styled('div')(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  flex: 1 0 auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid rgba(67, 90, 111, 0.079);\\n\"], [\"\\n  flex: 1 0 auto;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid rgba(67, 90, 111, 0.079);\\n\"])));\nvar Title = styled('h2')(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  margin: 0;\\n  color: #1f4160;\\n  font-size: 16px;\\n  font-weight: 600;\\n  line-height: 1.3;\\n\"], [\"\\n  margin: 0;\\n  color: #1f4160;\\n  font-size: 16px;\\n  font-weight: 600;\\n  line-height: 1.3;\\n\"])));\nvar HeaderCancelButton = styled('button')(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"], [\"\\n  padding: 8px;\\n  border: none;\\n  background: none;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 14px;\\n  line-height: 1;\\n  cursor: pointer;\\n\"])));\nvar Content = styled('div')(templateObject_8 || (templateObject_8 = __makeTemplateObject([\"\\n  overflow-y: auto;\\n  padding: 16px;\\n  padding-bottom: 0;\\n  min-height: 0;\\n  font-size: 14px;\\n  line-height: 1.2;\\n\\n  p {\\n    margin: 0;\\n    &:not(:last-child) {\\n      margin-bottom: 0.7em;\\n    }\\n  }\\n\\n  a {\\n    color: #47b881;\\n    &:hover {\\n      color: #64c395;\\n    }\\n    &:active {\\n      color: #248953;\\n    }\\n  }\\n\"], [\"\\n  overflow-y: auto;\\n  padding: 16px;\\n  padding-bottom: 0;\\n  min-height: 0;\\n  font-size: 14px;\\n  line-height: 1.2;\\n\\n  p {\\n    margin: 0;\\n    &:not(:last-child) {\\n      margin-bottom: 0.7em;\\n    }\\n  }\\n\\n  a {\\n    color: #47b881;\\n    &:hover {\\n      color: #64c395;\\n    }\\n    &:active {\\n      color: #248953;\\n    }\\n  }\\n\"])));\nvar Buttons = styled('div')(templateObject_9 || (templateObject_9 = __makeTemplateObject([\"\\n  padding: 16px;\\n  text-align: right;\\n\"], [\"\\n  padding: 16px;\\n  text-align: right;\\n\"])));\nvar Dialog = /** @class */ (function (_super) {\n    __extends(Dialog, _super);\n    function Dialog(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleRootRef = function (node) {\n            _this.root = node;\n        };\n        _this.handleFormRef = function (node) {\n            _this.form = node;\n        };\n        _this.handleOverlayClick = function (e) {\n            var onCancel = _this.props.onCancel;\n            // Ignore propogated clicks from inside the dialog\n            if (onCancel && _this.root && !_this.root.contains(e.target)) {\n                onCancel();\n            }\n        };\n        _this.handleEsc = function (e) {\n            var onCancel = _this.props.onCancel;\n            // Esc key\n            if (onCancel && e.keyCode === 27) {\n                onCancel();\n            }\n        };\n        _this.titleId = nanoid();\n        _this.container = document.createElement('div');\n        _this.container.setAttribute('data-consent-manager-dialog', '');\n        document.body.appendChild(_this.container);\n        return _this;\n    }\n    Dialog.prototype.render = function () {\n        var _a = this.props, onCancel = _a.onCancel, onSubmit = _a.onSubmit, title = _a.title, children = _a.children, buttons = _a.buttons, width = _a.width;\n        var dialog = (React.createElement(Overlay, { onClick: this.handleOverlayClick },\n            React.createElement(Root, { innerRef: this.handleRootRef, role: \"dialog\", \"aria-modal\": true, \"aria-labelledby\": this.titleId, width: width },\n                React.createElement(Header, null,\n                    React.createElement(Title, { id: this.titleId }, title),\n                    onCancel && (React.createElement(HeaderCancelButton, { onClick: onCancel, title: \"Cancel\", \"aria-label\": \"Cancel\" }, \"\\u2715\"))),\n                React.createElement(Form, { innerRef: this.handleFormRef, onSubmit: onSubmit },\n                    React.createElement(Content, null, children),\n                    React.createElement(Buttons, null, buttons)))));\n        return ReactDOM.createPortal(dialog, this.container);\n    };\n    Dialog.prototype.componentDidMount = function () {\n        var innerRef = this.props.innerRef;\n        if (this.form) {\n            var input = this.form.querySelector('input,button');\n            if (input) {\n                input.focus();\n            }\n        }\n        document.body.addEventListener('keydown', this.handleEsc, false);\n        document.body.style.overflow = 'hidden';\n        innerRef(this.container);\n    };\n    Dialog.prototype.componentWillUnmount = function () {\n        var innerRef = this.props.innerRef;\n        document.body.removeEventListener('keydown', this.handleEsc, false);\n        document.body.style.overflow = '';\n        document.body.removeChild(this.container);\n        innerRef(null);\n    };\n    Dialog.displayName = 'Dialog';\n    Dialog.defaultProps = {\n        onCancel: undefined,\n        width: '750px'\n    };\n    return Dialog;\n}(PureComponent));\nexport default Dialog;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport styled, { css } from 'react-emotion';\nvar baseStyles = css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  height: 32px;\\n  padding: 0 16px;\\n  border: none;\\n  border-radius: 4px;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 12px;\\n  line-height: 1;\\n  cursor: pointer;\\n  outline: none;\\n  transition: box-shadow 80ms ease-in-out;\\n\"], [\"\\n  height: 32px;\\n  padding: 0 16px;\\n  border: none;\\n  border-radius: 4px;\\n  color: inherit;\\n  font: inherit;\\n  font-size: 12px;\\n  line-height: 1;\\n  cursor: pointer;\\n  outline: none;\\n  transition: box-shadow 80ms ease-in-out;\\n\"])));\nexport var DefaultButton = styled('button')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  \", \";\\n  margin-right: 8px;\\n  background-color: #fff;\\n  background-image: linear-gradient(to top, rgba(67, 90, 111, 0.041), rgba(255, 255, 255, 0.041));\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  &:hover {\\n    background-image: linear-gradient(to top, rgba(67, 90, 111, 0.057), rgba(67, 90, 111, 0.025));\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.255),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.114);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(1, 108, 209, 0.146), inset 0 0 0 1px rgba(67, 90, 111, 0.38),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n  &:active {\\n    background: rgba(1, 108, 209, 0.079);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n\"], [\"\\n  \", \";\\n  margin-right: 8px;\\n  background-color: #fff;\\n  background-image: linear-gradient(to top, rgba(67, 90, 111, 0.041), rgba(255, 255, 255, 0.041));\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  &:hover {\\n    background-image: linear-gradient(to top, rgba(67, 90, 111, 0.057), rgba(67, 90, 111, 0.025));\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.255),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.114);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(1, 108, 209, 0.146), inset 0 0 0 1px rgba(67, 90, 111, 0.38),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n  &:active {\\n    background: rgba(1, 108, 209, 0.079);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.146),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.079);\\n  }\\n\"])), baseStyles);\nexport var GreenButton = styled('button')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  \", \";\\n  background-color: #47b881;\\n  background-image: linear-gradient(to top, #3faf77, #47b881);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #37a56d, #3faf77);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(71, 184, 129, 0.477), inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #2d9760, #248953);\\n    box-shadow: inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n\"], [\"\\n  \", \";\\n  background-color: #47b881;\\n  background-image: linear-gradient(to top, #3faf77, #47b881);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #37a56d, #3faf77);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(71, 184, 129, 0.477), inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #2d9760, #248953);\\n    box-shadow: inset 0 0 0 1px rgba(71, 184, 129, 0.204),\\n      inset 0 -1px 1px 0 rgba(71, 184, 129, 0.204);\\n  }\\n\"])), baseStyles);\nexport var RedButton = styled('button')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  \", \";\\n  background-color: #f36331;\\n  background-image: linear-gradient(to top, #f4541d, #f36331);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #f4450a, #f4541d);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(243, 99, 49, 0.477), inset 0 0 0 1px rgba(243, 99, 49, 0.204),\\n      inset 0 -1px 1px 0 rgba(243, 99, 49, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #dd3c06, #c63403);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  }\\n\"], [\"\\n  \", \";\\n  background-color: #f36331;\\n  background-image: linear-gradient(to top, #f4541d, #f36331);\\n  box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204), inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  color: #fff;\\n  &:hover {\\n    background-image: linear-gradient(to top, #f4450a, #f4541d);\\n  }\\n  &:focus {\\n    box-shadow: 0 0 0 3px rgba(243, 99, 49, 0.477), inset 0 0 0 1px rgba(243, 99, 49, 0.204),\\n      inset 0 -1px 1px 0 rgba(243, 99, 49, 0.204);\\n  }\\n  &:active {\\n    background-image: linear-gradient(to top, #dd3c06, #c63403);\\n    box-shadow: inset 0 0 0 1px rgba(67, 90, 111, 0.204),\\n      inset 0 -1px 1px 0 rgba(67, 90, 111, 0.204);\\n  }\\n\"])), baseStyles);\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport styled, { css } from 'react-emotion';\nimport Dialog from './dialog';\nimport { DefaultButton, GreenButton } from './buttons';\nvar hideOnMobile = css(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  @media (max-width: 600px) {\\n    display: none;\\n  }\\n\"], [\"\\n  @media (max-width: 600px) {\\n    display: none;\\n  }\\n\"])));\nvar TableScroll = styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  overflow-x: auto;\\n  margin-top: 16px;\\n\"], [\"\\n  overflow-x: auto;\\n  margin-top: 16px;\\n\"])));\nvar Table = styled('table')(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  border-collapse: collapse;\\n  font-size: 12px;\\n\"], [\"\\n  border-collapse: collapse;\\n  font-size: 12px;\\n\"])));\nvar ColumnHeading = styled('th')(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  background: #f7f8fa;\\n  color: #1f4160;\\n  font-weight: 600;\\n  text-align: left;\\n  border-width: 2px;\\n\"], [\"\\n  background: #f7f8fa;\\n  color: #1f4160;\\n  font-weight: 600;\\n  text-align: left;\\n  border-width: 2px;\\n\"])));\nvar RowHeading = styled('th')(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  font-weight: normal;\\n  text-align: left;\\n\"], [\"\\n  font-weight: normal;\\n  text-align: left;\\n\"])));\nvar Row = styled('tr')(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n  th,\\n  td {\\n    vertical-align: top;\\n    padding: 8px 12px;\\n    border: 1px solid rgba(67, 90, 111, 0.114);\\n  }\\n  td {\\n    border-top: none;\\n  }\\n\"], [\"\\n  th,\\n  td {\\n    vertical-align: top;\\n    padding: 8px 12px;\\n    border: 1px solid rgba(67, 90, 111, 0.114);\\n  }\\n  td {\\n    border-top: none;\\n  }\\n\"])));\nvar InputCell = styled('td')(templateObject_7 || (templateObject_7 = __makeTemplateObject([\"\\n  input {\\n    vertical-align: middle;\\n  }\\n  label {\\n    display: block;\\n    margin-bottom: 4px;\\n    white-space: nowrap;\\n  }\\n\"], [\"\\n  input {\\n    vertical-align: middle;\\n  }\\n  label {\\n    display: block;\\n    margin-bottom: 4px;\\n    white-space: nowrap;\\n  }\\n\"])));\nvar PreferenceDialog = /** @class */ (function (_super) {\n    __extends(PreferenceDialog, _super);\n    function PreferenceDialog() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleChange = function (e) {\n            var onChange = _this.props.onChange;\n            onChange(e.target.name, e.target.value === 'true');\n        };\n        _this.handleSubmit = function (e) {\n            var _a = _this.props, onSave = _a.onSave, preferences = _a.preferences, marketingAndAnalytics = _a.marketingAndAnalytics, advertising = _a.advertising, functional = _a.functional, customCategories = _a.customCategories;\n            e.preventDefault();\n            // Safe guard against browsers that don't prevent the\n            // submission of invalid forms (Safari < 10.1)\n            if (!customCategories &&\n                (marketingAndAnalytics === null || advertising === null || functional === null)) {\n                return;\n            }\n            // Safe guard against custom categories being null\n            if (customCategories &&\n                Object.keys(customCategories).some(function (category) { return preferences[category] === null; })) {\n                return;\n            }\n            onSave();\n        };\n        return _this;\n    }\n    PreferenceDialog.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, innerRef = _a.innerRef, onCancel = _a.onCancel, marketingDestinations = _a.marketingDestinations, advertisingDestinations = _a.advertisingDestinations, functionalDestinations = _a.functionalDestinations, marketingAndAnalytics = _a.marketingAndAnalytics, advertising = _a.advertising, functional = _a.functional, customCategories = _a.customCategories, destinations = _a.destinations, title = _a.title, content = _a.content, preferences = _a.preferences;\n        var buttons = (React.createElement(\"div\", null,\n            React.createElement(DefaultButton, { type: \"button\", onClick: onCancel }, \"Abbrechen\"),\n            React.createElement(GreenButton, { type: \"submit\" }, \"Speichern\")));\n        return (React.createElement(Dialog, { innerRef: innerRef, title: title, buttons: buttons, onCancel: onCancel, onSubmit: this.handleSubmit },\n            content,\n            React.createElement(TableScroll, null,\n                React.createElement(Table, null,\n                    React.createElement(\"thead\", null,\n                        React.createElement(Row, null,\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Erlaubnis\"),\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Kategorie\"),\n                            React.createElement(ColumnHeading, { scope: \"col\" }, \"Zweck\"),\n                            React.createElement(ColumnHeading, { scope: \"col\", className: hideOnMobile }, \"Tools\"))),\n                    React.createElement(\"tbody\", null,\n                        !customCategories && (React.createElement(React.Fragment, null,\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"functional\", value: \"true\", checked: functional === true, onChange: this.handleChange, \"aria-label\": \"Allow functional tracking\", required: true }),\n                                        ' ',\n                                        \"Ja\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"functional\", value: \"false\", checked: functional === false, onChange: this.handleChange, \"aria-label\": \"Disallow functional tracking\", required: true }),\n                                        ' ',\n                                        \"Nein\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Funktional\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"Diese Cookies erm\\u00F6glichen es uns, die Funktionalit\\u00E4t und individuelle Gestaltung zu verbessern, beispielsweise von Videos und Live-Chats. Sie k\\u00F6nnen von uns oder von Drittanbietern festgelegt werden, deren Dienste wir auf unseren Seiten hinzugef\\u00FCgt haben. Wenn du diese Cookies nicht zul\\u00E4sst, kann es sein, dass einige oder alle dieser Funktionen nicht ordnungsgem\\u00E4\\u00DF funktionieren.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, these tools enable you to communicate with us via live chat.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, functionalDestinations.map(function (d) { return d.name; }).join(', '))),\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"marketingAndAnalytics\", value: \"true\", checked: marketingAndAnalytics === true, onChange: this.handleChange, \"aria-label\": \"Allow marketing and analytics tracking\", required: true }),\n                                        ' ',\n                                        \"Ja\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"marketingAndAnalytics\", value: \"false\", checked: marketingAndAnalytics === false, onChange: this.handleChange, \"aria-label\": \"Disallow marketing and analytics tracking\", required: true }),\n                                        ' ',\n                                        \"Nein\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Marketing and Analytics\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"Diese Cookies werden durch unsere Website von unseren Werbepartnern eingestellt. Sie k\\u00F6nnen von diesen Unternehmen verwendet werden, um ein Profil deiner Interessen zu erstellen und dir relevante Anzeigen an anderer Stelle zu zeigen. Sie funktionieren, indem sie deinen Browser und dein Ger\\u00E4t eindeutig identifizieren. Wenn du diese Cookies nicht zul\\u00E4sst, wird dir auf verschiedenen Websites keine gezielte Werbung aufgrund dieser Cookies angezeigt.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, we collect information about which pages you visit to help us present more relevant information.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, marketingDestinations.map(function (d) { return d.name; }).join(', '))),\n                            React.createElement(Row, null,\n                                React.createElement(InputCell, null,\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"advertising\", value: \"true\", checked: advertising === true, onChange: this.handleChange, \"aria-label\": \"Allow advertising tracking\", required: true }),\n                                        ' ',\n                                        \"Ja\"),\n                                    React.createElement(\"label\", null,\n                                        React.createElement(\"input\", { type: \"radio\", name: \"advertising\", value: \"false\", checked: advertising === false, onChange: this.handleChange, \"aria-label\": \"Disallow advertising tracking\", required: true }),\n                                        ' ',\n                                        \"Nein\")),\n                                React.createElement(RowHeading, { scope: \"row\" }, \"Advertising\"),\n                                React.createElement(\"td\", null,\n                                    React.createElement(\"p\", null, \"Zur Personalisierung und Messung der Effektivit\\u00E4t von Werbung auf unserer Website und anderen Websites.\"),\n                                    React.createElement(\"p\", { className: hideOnMobile }, \"For example, we may serve you a personalized ad based on the pages you visit on our site.\")),\n                                React.createElement(\"td\", { className: hideOnMobile }, advertisingDestinations.map(function (d) { return d.name; }).join(', '))))),\n                        customCategories &&\n                            Object.entries(customCategories).map(function (_a) {\n                                var categoryName = _a[0], _b = _a[1], integrations = _b.integrations, purpose = _b.purpose;\n                                return (React.createElement(Row, { key: categoryName },\n                                    React.createElement(InputCell, null,\n                                        React.createElement(\"label\", null,\n                                            React.createElement(\"input\", { type: \"radio\", name: categoryName, value: \"true\", checked: preferences[categoryName] === true, onChange: _this.handleChange, \"aria-label\": \"Allow \\\"\" + categoryName + \"\\\" tracking\", required: true }),\n                                            ' ',\n                                            \"Ja\"),\n                                        React.createElement(\"label\", null,\n                                            React.createElement(\"input\", { type: \"radio\", name: categoryName, value: \"false\", checked: preferences[categoryName] === false, onChange: _this.handleChange, \"aria-label\": \"Disallow \\\"\" + categoryName + \"\\\" tracking\", required: true }),\n                                            ' ',\n                                            \"Nein\")),\n                                    React.createElement(RowHeading, { scope: \"row\" }, categoryName),\n                                    React.createElement(\"td\", null,\n                                        React.createElement(\"p\", null, purpose)),\n                                    React.createElement(\"td\", { className: hideOnMobile }, destinations\n                                        .filter(function (d) { return integrations.includes(d.id); })\n                                        .map(function (d) { return d.name; })\n                                        .join(', '))));\n                            }),\n                        React.createElement(Row, null,\n                            React.createElement(\"td\", null, \"N/A\"),\n                            React.createElement(RowHeading, { scope: \"row\" }, \"Unbedingt erforderlich\"),\n                            React.createElement(\"td\", null,\n                                React.createElement(\"p\", null, \"Diese Cookies sind f\\u00FCr die Funktion der Website notwendig und k\\u00F6nnen in unseren Systemen nicht ausgeschaltet werden. Sie werden in der Regel nur als Reaktion auf eine deiner Aktionen eingestellt, die zu einer Anfrage nach einem Service f\\u00FChren, wie beispielsweise das Festlegen deiner Datenschutzeinstellungen, das Einloggen oder das Ausf\\u00FCllen von Formularen. Du kannst deinen Browser so einstellen, dass diese Cookies blockiert oder dich warnt, dann k\\u00F6nnte es jedoch sein, dass einige Teile der Website nicht funktionieren.\")),\n                            React.createElement(\"td\", { className: hideOnMobile })))))));\n    };\n    PreferenceDialog.displayName = 'PreferenceDialog';\n    PreferenceDialog.defaultProps = {\n        marketingAndAnalytics: null,\n        advertising: null,\n        functional: null\n    };\n    return PreferenceDialog;\n}(PureComponent));\nexport default PreferenceDialog;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { PureComponent } from 'react';\nimport Dialog from './dialog';\nimport { DefaultButton, RedButton } from './buttons';\nvar CancelDialog = /** @class */ (function (_super) {\n    __extends(CancelDialog, _super);\n    function CancelDialog() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleSubmit = function (e) {\n            var onConfirm = _this.props.onConfirm;\n            e.preventDefault();\n            onConfirm();\n        };\n        _this.handleEsc = function (e) {\n            var onConfirm = _this.props.onConfirm;\n            // Esc key\n            if (e.keyCode === 27) {\n                onConfirm();\n            }\n        };\n        return _this;\n    }\n    CancelDialog.prototype.render = function () {\n        var _a = this.props, innerRef = _a.innerRef, onBack = _a.onBack, title = _a.title, content = _a.content;\n        var buttons = (React.createElement(\"div\", null,\n            React.createElement(DefaultButton, { type: \"button\", onClick: onBack }, \"Zur\\u00FCck\"),\n            React.createElement(RedButton, { type: \"submit\" }, \"Abbrechen\")));\n        return (React.createElement(Dialog, { innerRef: innerRef, title: title, buttons: buttons, onSubmit: this.handleSubmit, width: \"500px\" }, content));\n    };\n    CancelDialog.prototype.componentDidMount = function () {\n        document.body.addEventListener('keydown', this.handleEsc, false);\n    };\n    CancelDialog.prototype.componentWillUnmount = function () {\n        document.body.removeEventListener('keydown', this.handleEsc, false);\n    };\n    CancelDialog.displayName = 'CancelDialog';\n    return CancelDialog;\n}(PureComponent));\nexport default CancelDialog;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nimport EventEmitter from 'events';\nimport React from 'react';\nimport styled from 'react-emotion';\nimport mixpanel from 'mixpanel-browser';\nimport Banner from './banner';\nimport PreferenceDialog from './preference-dialog';\nimport CancelDialog from './cancel-dialog';\nimport { ADVERTISING_CATEGORIES, FUNCTIONAL_CATEGORIES } from './categories';\nvar Overlay = styled('div')(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 9998;\\n  background: rgba(0, 0, 0, 0.6);\\n  backdrop-filter: blur(4px);\\n\"], [\"\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 9998;\\n  background: rgba(0, 0, 0, 0.6);\\n  backdrop-filter: blur(4px);\\n\"])));\nvar emitter = new EventEmitter();\nexport function openDialog() {\n    emitter.emit('openDialog');\n}\nfunction normalizeDestinations(destinations) {\n    var marketingDestinations = [];\n    var advertisingDestinations = [];\n    var functionalDestinations = [];\n    var _loop_1 = function (destination) {\n        if (ADVERTISING_CATEGORIES.find(function (c) { return c === destination.category; })) {\n            advertisingDestinations.push(destination);\n        }\n        else if (FUNCTIONAL_CATEGORIES.find(function (c) { return c === destination.category; })) {\n            functionalDestinations.push(destination);\n        }\n        else {\n            // Fallback to marketing\n            marketingDestinations.push(destination);\n        }\n    };\n    for (var _i = 0, destinations_1 = destinations; _i < destinations_1.length; _i++) {\n        var destination = destinations_1[_i];\n        _loop_1(destination);\n    }\n    return { marketingDestinations: marketingDestinations, advertisingDestinations: advertisingDestinations, functionalDestinations: functionalDestinations };\n}\nvar Container = function (props) {\n    var _a = React.useState(false || (props.workspaceAddedNewDestinations && props.defaultDestinationBehavior === 'ask')), isDialogOpen = _a[0], toggleDialog = _a[1];\n    var _b = React.useState(true), showBanner = _b[0], toggleBanner = _b[1];\n    var _c = React.useState(false), isCancelling = _c[0], toggleCancel = _c[1];\n    var banner = React.useRef(null);\n    var preferenceDialog = React.useRef(null);\n    var cancelDialog = React.useRef(null);\n    var _d = normalizeDestinations(props.destinations), marketingDestinations = _d.marketingDestinations, advertisingDestinations = _d.advertisingDestinations, functionalDestinations = _d.functionalDestinations;\n    var handleBodyClick = function (e) {\n        // Do nothing if no new implicit consent needs to be saved\n        if (!props.isConsentRequired ||\n            !props.implyConsentOnInteraction ||\n            props.newDestinations.length === 0) {\n            return;\n        }\n        // Ignore propogated clicks from inside the consent manager\n        if ((banner.current && banner.current.contains(e.target)) ||\n            (preferenceDialog.current && preferenceDialog.current.contains(e.target)) ||\n            (cancelDialog.current && cancelDialog.current.contains(e.target))) {\n            return;\n        }\n        props.saveConsent(undefined, false);\n    };\n    var showDialog = function () { return toggleDialog(true); };\n    React.useEffect(function () {\n        emitter.on('openDialog', showDialog);\n        if (props.isConsentRequired && props.implyConsentOnInteraction) {\n            document.body.addEventListener('click', handleBodyClick, false);\n        }\n        return function () {\n            emitter.removeListener('openDialog', showDialog);\n            document.body.removeEventListener('click', handleBodyClick, false);\n        };\n    });\n    React.useEffect(function () {\n        if (isDialogOpen) {\n            props.resetPreferences();\n        }\n    }, [isDialogOpen]);\n    var onClose = function () {\n        if (props.closeBehavior === undefined || props.closeBehavior === \"dismiss\" /* DISMISS */) {\n            return toggleBanner(false);\n        }\n        if (props.closeBehavior === \"accept\" /* ACCEPT */) {\n            return props.saveConsent();\n        }\n        if (props.closeBehavior === \"deny\" /* DENY */) {\n            var falsePreferences = Object.keys(props.preferences).reduce(function (acc, category) {\n                acc[category] = false;\n                return acc;\n            }, {});\n            props.setPreferences(falsePreferences);\n            return props.saveConsent();\n        }\n        // closeBehavior is a custom function\n        var customClosePreferences = props.closeBehavior(props.preferences);\n        props.setPreferences(customClosePreferences);\n        props.saveConsent();\n        return toggleBanner(false);\n    };\n    var onAccept = function () {\n        if (props.mixpanelTracking) {\n            mixpanel.track('banner_accept_clicked');\n        }\n        var truePreferences = Object.keys(props.preferences).reduce(function (acc, category) {\n            acc[category] = true;\n            return acc;\n        }, {});\n        props.setPreferences(truePreferences);\n        return props.saveConsent();\n    };\n    var onReject = function () {\n        var falsePreferences = Object.keys(props.preferences).reduce(function (acc, category) {\n            acc[category] = false;\n            return acc;\n        }, {});\n        props.setPreferences(falsePreferences);\n        return props.saveConsent();\n    };\n    var onChangePreferences = function () {\n        if (props.mixpanelTracking) {\n            mixpanel.track('banner_settings_clicked');\n        }\n        toggleDialog(true);\n    };\n    var handleCategoryChange = function (category, value) {\n        var _a;\n        props.setPreferences((_a = {},\n            _a[category] = value,\n            _a));\n    };\n    var handleSave = function () {\n        if (props.mixpanelTracking) {\n            mixpanel.track('banner_settings_saved_clicked');\n        }\n        toggleDialog(false);\n        props.saveConsent();\n    };\n    var handleCancel = function () {\n        // Only show the cancel confirmation if there's unconsented destinations\n        if (props.newDestinations.length > 0) {\n            toggleCancel(true);\n        }\n        else {\n            toggleDialog(false);\n            props.resetPreferences();\n        }\n    };\n    var handleCancelBack = function () {\n        toggleCancel(false);\n    };\n    var handleCancelConfirm = function () {\n        toggleCancel(false);\n        toggleDialog(false);\n        props.resetPreferences();\n    };\n    return (React.createElement(\"div\", { className: \"consent-manager-container\" },\n        showBanner && props.isConsentRequired && props.newDestinations.length > 0 && (React.createElement(Overlay, null,\n            React.createElement(Banner, { innerRef: function (current) { return (banner = { current: current }); }, showClose: false, onClose: onClose, onAccept: onAccept, onReject: onReject, onChangePreferences: onChangePreferences, heading: props.bannerHeading, content: props.bannerContent, acceptContent: props.bannerAcceptContent, rejectContent: props.bannerRejectContent, subContent: props.bannerSubContent, textColor: props.bannerTextColor, backgroundColor: props.bannerBackgroundColor }))),\n        isDialogOpen && (React.createElement(PreferenceDialog, { customCategories: props.customCategories, destinations: props.destinations, preferences: props.preferences, innerRef: function (current) { return (preferenceDialog = { current: current }); }, onCancel: handleCancel, onSave: handleSave, onChange: handleCategoryChange, marketingDestinations: marketingDestinations, advertisingDestinations: advertisingDestinations, functionalDestinations: functionalDestinations, marketingAndAnalytics: props.preferences.marketingAndAnalytics, advertising: props.preferences.advertising, functional: props.preferences.functional, title: props.preferencesDialogTitle, content: props.preferencesDialogContent })),\n        isCancelling && (React.createElement(CancelDialog, { innerRef: function (current) { return (cancelDialog = { current: current }); }, onBack: handleCancelBack, onConfirm: handleCancelConfirm, title: props.cancelDialogTitle, content: props.cancelDialogContent }))));\n};\nexport default Container;\nvar templateObject_1;\n","import React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button, Paragraph } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager } from '../src';\nimport { bannerContent, bannerSubContent, preferencesDialogContent, preferencesDialogTitle, cancelDialogContent, cancelDialogTitle } from './components/common-react';\nexport var ImplyConsentOnInteraction = function () {\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, implyConsentOnInteraction: true }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Paragraph, null, \"Clicking anywhere on this page will cause the Consent Manager to imply consent.\"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"div\", null,\n                React.createElement(Button, { onClick: openConsentManager }, \"Data Collection and Cookie Preferences\")),\n            React.createElement(\"div\", null,\n                React.createElement(Heading, null, \"to see the banner again:\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear tracking preferences cookie\")))));\n};\n","import React from 'react';\nexport var bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nexport var bannerSubContent = 'You can manage your preferences here!';\nexport var preferencesDialogTitle = 'Website Data Collection Preferences';\nexport var preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nexport var cancelDialogTitle = 'Are you sure you want to cancel?';\nexport var cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\n","import { configure } from '@storybook/react'\n\nconfigure(require.context('../stories', true, /\\.stories\\.tsx$/), module)\n","var map = {\n\t\"./0-consent-manager.stories.tsx\": 784,\n\t\"./0.1-consent-manager-close-interaction.stories.tsx\": 1061,\n\t\"./1-standalone.stories.tsx\": 1062,\n\t\"./1.1-standalone-custom.stories.tsx\": 1063,\n\t\"./2-category-based.stories.tsx\": 1064,\n\t\"./3-tool-based.stories.tsx\": 1065,\n\t\"./4-custom-consent.stories.tsx\": 1066,\n\t\"./5-custom-categories.stories.tsx\": 1067,\n\t\"./6-ccpa-gdpr-example.stories.tsx\": 1068,\n\t\"./7-default-destination-behavior.stories.tsx\": 1074,\n\t\"./8-mixpanel-custom-events.stories.tsx\": 1075,\n\t\"./9-heading.stories.tsx\": 1076\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 783;","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// @ts-ignore\nvar withSourceLoader = require('@storybook/source-loader/preview').withSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = \"/Users/chi_yue/dev/tilda/consent-manager/stories\";\n// @ts-ignore\nvar __STORY__ = \"import React from 'react'\\nimport cookies from 'js-cookie'\\nimport { Pane, Heading, Button } from 'evergreen-ui'\\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src'\\nimport { storiesOf } from '@storybook/react'\\nimport { CloseBehavior, CloseBehaviorFunction } from '../src/consent-manager/container'\\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs'\\nimport SyntaxHighlighter from 'react-syntax-highlighter'\\nimport { Preferences } from '../src/types'\\nimport CookieView from './components/CookieView'\\n\\nconst bannerContent = (\\n  <span>\\n    We use cookies (and other similar technologies) to collect data to improve your experience on\\n    our site. By using our website, you’re agreeing to the collection of data as described in our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </span>\\n)\\nconst bannerSubContent = 'Manage Preferences'\\nconst preferencesDialogTitle = 'Website Data Collection Preferences'\\nconst preferencesDialogContent = (\\n  <div>\\n    <p>\\n      Segment uses data collected by cookies and JavaScript libraries to improve your browsing\\n      experience, analyze site traffic, deliver personalized advertisements, and increase the\\n      overall performance of our site.\\n    </p>\\n    <p>\\n      By using our website, you’re agreeing to our{' '}\\n      <a\\n        href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noopener noreferrer\\\"\\n      >\\n        Website Data Collection Policy\\n      </a>\\n      .\\n    </p>\\n    <p>\\n      The table below outlines how we use this data by category. To opt out of a category of data\\n      collection, select “No” and save your preferences.\\n    </p>\\n  </div>\\n)\\nconst cancelDialogTitle = 'Are you sure you want to cancel?'\\nconst cancelDialogContent = (\\n  <div>\\n    Your preferences have not been saved. By continuing to use our website, you’re agreeing to our{' '}\\n    <a\\n      href=\\\"https://segment.com/docs/legal/website-data-collection-policy/\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noopener noreferrer\\\"\\n    >\\n      Website Data Collection Policy\\n    </a>\\n    .\\n  </div>\\n)\\n\\nconst ConsentManagerExample = (props: { closeBehavior: CloseBehavior | CloseBehaviorFunction }) => {\\n  const [prefs, updatePrefs] = React.useState<Preferences>(loadPreferences())\\n\\n  const cleanup = onPreferencesSaved(preferences => {\\n    updatePrefs(preferences)\\n  })\\n\\n  React.useEffect(() => {\\n    return () => {\\n      cleanup()\\n    }\\n  })\\n\\n  return (\\n    <Pane>\\n      <ConsentManager\\n        writeKey=\\\"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\\\"\\n        otherWriteKeys={['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l']}\\n        bannerContent={bannerContent}\\n        bannerSubContent={bannerSubContent}\\n        preferencesDialogTitle={preferencesDialogTitle}\\n        preferencesDialogContent={preferencesDialogContent}\\n        cancelDialogTitle={cancelDialogTitle}\\n        cancelDialogContent={cancelDialogContent}\\n        closeBehavior={props.closeBehavior}\\n      />\\n\\n      <Pane marginX={100} marginTop={20}>\\n        <Heading> Your website content </Heading>\\n        <Pane display=\\\"flex\\\">\\n          <iframe\\n            src=\\\"https://giphy.com/embed/JIX9t2j0ZTN9S\\\"\\n            width=\\\"480\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n\\n          <iframe\\n            src=\\\"https://giphy.com/embed/yFQ0ywscgobJK\\\"\\n            width=\\\"398\\\"\\n            height=\\\"480\\\"\\n            frameBorder=\\\"0\\\"\\n          />\\n        </Pane>\\n\\n        <p>\\n          <div>\\n            <Heading>Current Preferences</Heading>\\n            <SyntaxHighlighter language=\\\"json\\\" style={docco}>\\n              {JSON.stringify(prefs, null, 2)}\\n            </SyntaxHighlighter>\\n          </div>\\n          <Button marginRight={20} onClick={openConsentManager}>\\n            Change Cookie Preferences\\n          </Button>\\n          <Button\\n            onClick={() => {\\n              cookies.remove('tracking-preferences')\\n              window.location.reload()\\n            }}\\n          >\\n            Clear\\n          </Button>\\n        </p>\\n      </Pane>\\n      <CookieView />\\n    </Pane>\\n  )\\n}\\n\\nstoriesOf('React Component / OnClose interactions', module)\\n  .add(`Dismiss`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DISMISS} />)\\n  .add(`Accept`, () => <ConsentManagerExample closeBehavior={CloseBehavior.ACCEPT} />)\\n  .add(`Deny`, () => <ConsentManagerExample closeBehavior={CloseBehavior.DENY} />)\\n  .add(`Custom Close Behavior`, () => (\\n    <ConsentManagerExample\\n      closeBehavior={categories => ({\\n        ...categories,\\n        advertising: false\\n      })}\\n    />\\n  ))\\n\";\n// @ts-ignore\nvar __ADDS_MAP__ = {};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = \"/0-consent-manager.stories.tsx\";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\nimport React from 'react';\nimport cookies from 'js-cookie';\nimport { Pane, Heading, Button } from 'evergreen-ui';\nimport { ConsentManager, openConsentManager, loadPreferences, onPreferencesSaved } from '../src';\nimport { storiesOf } from '@storybook/react';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport CookieView from './components/CookieView';\nvar bannerContent = (React.createElement(\"span\", null,\n    \"We use cookies (and other similar technologies) to collect data to improve your experience on our site. By using our website, you\\u2019re agreeing to the collection of data as described in our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar bannerSubContent = 'Manage Preferences';\nvar preferencesDialogTitle = 'Website Data Collection Preferences';\nvar preferencesDialogContent = (React.createElement(\"div\", null,\n    React.createElement(\"p\", null, \"Segment uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic, deliver personalized advertisements, and increase the overall performance of our site.\"),\n    React.createElement(\"p\", null,\n        \"By using our website, you\\u2019re agreeing to our\",\n        ' ',\n        React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n        \".\"),\n    React.createElement(\"p\", null, \"The table below outlines how we use this data by category. To opt out of a category of data collection, select \\u201CNo\\u201D and save your preferences.\")));\nvar cancelDialogTitle = 'Are you sure you want to cancel?';\nvar cancelDialogContent = (React.createElement(\"div\", null,\n    \"Your preferences have not been saved. By continuing to use our website, you\\u2019re agreeing to our\",\n    ' ',\n    React.createElement(\"a\", { href: \"https://segment.com/docs/legal/website-data-collection-policy/\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"Website Data Collection Policy\"),\n    \".\"));\nvar ConsentManagerExample = function (props) {\n    var _a = React.useState(loadPreferences()), prefs = _a[0], updatePrefs = _a[1];\n    var cleanup = onPreferencesSaved(function (preferences) {\n        updatePrefs(preferences);\n    });\n    React.useEffect(function () {\n        return function () {\n            cleanup();\n        };\n    });\n    return (React.createElement(Pane, null,\n        React.createElement(ConsentManager, { writeKey: \"tYQQPcY78Hc3T1hXUYk0n4xcbEHnN7r0\", otherWriteKeys: ['vMRS7xbsjH97Bb2PeKbEKvYDvgMm5T3l'], bannerContent: bannerContent, bannerSubContent: bannerSubContent, preferencesDialogTitle: preferencesDialogTitle, preferencesDialogContent: preferencesDialogContent, cancelDialogTitle: cancelDialogTitle, cancelDialogContent: cancelDialogContent, closeBehavior: props.closeBehavior }),\n        React.createElement(Pane, { marginX: 100, marginTop: 20 },\n            React.createElement(Heading, null, \" Your website content \"),\n            React.createElement(Pane, { display: \"flex\" },\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/JIX9t2j0ZTN9S\", width: \"480\", height: \"480\", frameBorder: \"0\" }),\n                React.createElement(\"iframe\", { src: \"https://giphy.com/embed/yFQ0ywscgobJK\", width: \"398\", height: \"480\", frameBorder: \"0\" })),\n            React.createElement(\"p\", null,\n                React.createElement(\"div\", null,\n                    React.createElement(Heading, null, \"Current Preferences\"),\n                    React.createElement(SyntaxHighlighter, { language: \"json\", style: docco }, JSON.stringify(prefs, null, 2))),\n                React.createElement(Button, { marginRight: 20, onClick: openConsentManager }, \"Change Cookie Preferences\"),\n                React.createElement(Button, { onClick: function () {\n                        cookies.remove('tracking-preferences');\n                        window.location.reload();\n                    } }, \"Clear\"))),\n        React.createElement(CookieView, null)));\n};\nstoriesOf('React Component / OnClose interactions', module).addParameters({ storySource: { source: __STORY__, locationsMap: __ADDS_MAP__ } }).addDecorator(withSourceLoader(__STORY__, __ADDS_MAP__, __MAIN_FILE_LOCATION__, __MODULE_DEPENDENCIES__, __LOCAL_DEPENDENCIES__, __SOURCE_PREFIX__, __IDS_TO_FRAMEWORKS__))\n    .add(\"Dismiss\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"dismiss\" /* DISMISS */ }); })\n    .add(\"Accept\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"accept\" /* ACCEPT */ }); })\n    .add(\"Deny\", function () { return React.createElement(ConsentManagerExample, { closeBehavior: \"deny\" /* DENY */ }); })\n    .add(\"Custom Close Behavior\", function () { return (React.createElement(ConsentManagerExample, { closeBehavior: function (categories) { return (__assign(__assign({}, categories), { advertising: false })); } })); });\n"],"sourceRoot":""}